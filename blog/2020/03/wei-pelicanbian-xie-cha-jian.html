<!DOCTYPE html>
<html lang="en">

<head>
        <meta name="google-site-verification" content="d0pvXqLPH8JyCfWVyhZ7njhGUndRFIR95YM3myMb7rU" />
        <meta charset="utf-8" />
        <meta http-equiv="Cache-Control" content="no-transform" />
        <meta http-equiv="Cache-Control" content="no-siteapp" />
        <meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=yes" />
        <title>ä¸ºPelicanç¼–å†™æ’ä»¶</title>
        <link rel="stylesheet" href="/theme/css/main.css" />

        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
        <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>


        <link rel="stylesheet" href="//unpkg.com/heti/umd/heti.min.css">

</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <!-- <h1><a href="/">steer </a></h1> -->
                <nav>
                        <ul>
                                <li><a href="/">ğŸ¦‰</a></li>
                                <li><a href="/blog">Blog</a></li>
                                <li><a href="/archives">Archives</a></li>
                                <li><a href="/gallery">Gallery</a></li>
                                <li id="navName">steer </li>
                        </ul>
                </nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/blog/2020/03/wei-pelicanbian-xie-cha-jian" rel="bookmark" title="Permalink to ä¸ºPelicanç¼–å†™æ’ä»¶">ä¸ºPelicanç¼–å†™æ’ä»¶</a>
      </h1>
    </header>

    <div class="entry-content">
<div class="post-meta">
        Date: <span >
               2020-03-31 Tue
        </span>
<span>Category: <a href="/category/pelican/">Pelican</a></span>
<!-- <p>tags: <a href="/tags/pelican/">Pelican</a> <a href="/tags/python/">Python</a> </p> -->

</div><!-- /.post-info -->

      <p>ğŸ§</p>
<p>è¿™é‡Œä¸º<a href="Pelican" title="https://blog.getpelican.com/">Pelican</a>ç§»æ¤äº†ä¸€ä¸ªé™æ€çš„ç›¸å†Œ<a href="Sigal" title="http://sigal.saimon.org/en/latest/">Sigal</a>ï¼Œä½¿å¾—ç›¸å†Œç¨‹åºä¹Ÿèƒ½æ‰˜ç®¡åœ¨Github Pageä¸Šã€‚</p>
<p>å¾ˆä¹…ä¹‹å‰å°±æœ‰æ‰“ç®—è¿‡ç»™Pelicanå†™ä¸ªæ’ä»¶å®ç°è¿™æ ·çš„åŠŸèƒ½ï¼Œä¸€ç›´æ²¡æœ‰ä»”ç»†çœ‹è¿‡Pelicançš„å®ç°é€»è¾‘æ˜¯æ€ä¹ˆæ ·çš„ï¼Œä»Šå¤©åˆšå¥½çœ‹åˆ°äº†è¿™æ ·ä¸€ä¸ªé™æ€ç›¸å†Œï¼ŒèŠ±äº†ä¸€æ™šä¸Šçš„æ—¶é—´å°†å…¶ä»¥æ’ä»¶çš„å½¢å¼é›†æˆåˆ°Pelicanä¸­ã€‚</p>
<p>Pelicanä¸­å…³äºæ’ä»¶çš„æ–‡æ¡£å¹¶ä¸æ˜¯å¾ˆå¤šï¼Œæ–‡æ¡£ä¸­ç»™çš„æ ·ä¾‹å¾ˆçŸ­</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pelican</span> <span class="kn">import</span> <span class="n">signals</span>

<span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="n">sender</span><span class="p">):</span>
    <span class="nb">print</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> initialized !!&quot;</span> <span class="o">%</span> <span class="n">sender</span>

<span class="k">def</span> <span class="nf">register</span><span class="p">():</span>
    <span class="n">signals</span><span class="o">.</span><span class="n">initialized</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">test</span><span class="p">)</span>
</code></pre></div>

<p>çœ‹èµ·æ¥æ˜¯è‡ªå·±å®ç°ä¸€ä¸ªå¤„ç†å‡½æ•°ï¼Œç„¶åå°†è¿™ä¸ªå‡½æ•°æ³¨å†Œåˆ°Pelicanå†…éƒ¨çš„ä¿¡å·é‡ä¸Šï¼Œè¿™æ ·Pelicanä¼šå°†è‡ªå®šä¹‰å‡½æ•°æ’å…¥åˆ°å¤„ç†çš„æµç¨‹ä¸­ï¼Œç±»ä¼¼äºåœ¨æ°´ç®¡ä¸­å¤šåŠ äº†ä¸€æ®µã€‚</p>
<p>å…³äºä¿¡å·é‡çš„è¯´æ˜ä¹Ÿæ˜¯çœ‹å¾—æˆ‘ä¸€è„¸æ‡µé€¼ï¼Œæˆ‘åœ¨æ•´ä¸ªéƒ½å®ç°å®Œä¹‹åæ‰çœ‹æ˜ç™½ä¸åŒçš„é˜¶æ®µåŠå‚æ•°æ˜¯ä»€ä¹ˆæ„æ€ã€‚</p>
<p>Signalæ˜¯å¯ä»¥ç›´æ¥ä»æ–‡ä»¶å¤¹ç”Ÿæˆç›¸å†Œï¼Œè¿˜ä¼šæœ‰å…¶ä»–çš„ä¸€äº›è‡ªå®šä¹‰ä¿®é¥°ã€‚æˆ‘è§‰å¾—è¿™ä¸ªç‰¹æ€§æ‹¿æ¥é…ç½®åœ¨é™æ€åšå®¢ä¸‹ä¹Ÿæ˜¯å¾ˆæ–¹ä¾¿çš„ï¼Œæ›´é‡è¦çš„æ˜¯ä¸ç”¨å†æ‹…å¿ƒå›¾åºŠä»€ä¹ˆæ—¶å€™æŒ‚æ‰äº†ã€‚</p>
<p>åœ¨Pelicanä¸­ï¼Œå¦‚æœè¦ç”Ÿæˆæ–°çš„é¡µé¢è€Œä¸æ˜¯åœ¨å·²æœ‰çš„å†…å®¹ä¸Šæ·»åŠ çš„è¯ï¼Œéœ€è¦è‡ªå®šä¹‰<code>generator</code>ï¼Œ æ–‡æ¡£ä¸­ç»™äº†æ¯”è¾ƒçŸ­çš„ä¸€æ®µç¤ºä¾‹</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_generators</span><span class="p">(</span><span class="n">pelican_object</span><span class="p">):</span>
    <span class="c1"># define a new generator here if you need to</span>
    <span class="k">return</span> <span class="n">MyGenerator</span>

<span class="n">signals</span><span class="o">.</span><span class="n">get_generators</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">get_generators</span><span class="p">)</span>
</code></pre></div>

<p>è¿™ä¸ªä¹Ÿæ˜¯è¯´çš„ä¸å¤ªæ˜ç™½ï¼Œæ–‡æ¡£ä¸­è¿˜æœ‰ä¸€æ®µ<code>How to implement a new generator?</code>æåˆ°äº†ï¼Œ<code>generator</code>éœ€è¦å®ç°ä¸¤ä¸ªæ–¹æ³•ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•å°†ä¼šè¢«ä¾æ¬¡è°ƒç”¨</p>
<ul>
<li><code>generate_context</code> è¿™ä¸ªæ–¹æ³•å°±æ˜¯è¦ç”Ÿæˆæ‰€éœ€è¦çš„ä¿¡æ¯ï¼Œç”¨äºä¼ é€’ç»™jinja2æ¨¡æ¿ã€‚</li>
<li><code>generate_output</code> è¿™ä¸ªæ–¹æ³•ç”¨æ¥ç”Ÿæˆé¡µé¢ï¼Œå°†ä¼šä¼ å…¥ä¸€ä¸ª<code>writer</code>çš„å‚æ•°ï¼Œç”¨äºæ§åˆ¶jinja2çš„ä¸€äº›å‚æ•°ï¼Œä»¥åŠå†™å…¥å†…å®¹çš„å­—å…¸ã€‚</li>
</ul>
<p>å®é™…ä¸Šè¿™ä¸¤ä¸ªæ–¹æ³•è¦æ€ä¹ˆç”Ÿæˆï¼Œå†…éƒ¨è¯¥æœ‰æ€æ ·çš„ç»“æ„ï¼Œåªèƒ½çœ‹æºç äº†ã€‚ æˆ‘æŒ‰ç…§Pelicanä¸­<code>generator.py</code>çš„ä»£ç ï¼Œæ¨¡ä»¿ç€å†™äº†ä¸€ä¸ª<code>gallery_generator</code>ç±»ã€‚è¿™ä¸ªç±»çš„å†…éƒ¨ä»£ç åˆ™æ˜¯ä»Signalç§»æ¤è¿‡æ¥çš„ã€‚</p>
<p>Signalçš„ä»£ç æ˜¯æ²¡æœ‰åŠæ³•ç›´æ¥æ‹¿æ¥ç”¨çš„ï¼Œå®ƒæœ¬æ¥å°±æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„é¡¹ç›®ï¼Œå®ç°äº†è‡ªå·±çš„<code>writer</code>ç”¨äºæ§åˆ¶é¡µé¢ç”Ÿæˆã€‚ éœ€è¦æŠŠå…¶ä¸­ç›¸å…³çš„ä»£ç æŠ½å‡ºæ¥ï¼Œè°ƒæ•´æˆä¸Pelicané€‚é…çš„å½¢å¼ã€‚</p>
<p>å…¶ä¸­æ¨¡æ¿æ–‡ä»¶è·ŸCSSæ¯”è¾ƒå¥½æ”¹å†™ï¼Œéœ€è¦å°†jinja2æ¨¡æ¿ä¸­çš„è·¯å¾„æ”¹æˆå¸¦å‚æ•°çš„ã€‚ æ¯”è¾ƒè´¹æ—¶çš„æ˜¯Signalä¸­<code>url</code>çš„ç”Ÿæˆï¼Œä¸Pelicançš„è§„åˆ™å®Œå…¨ä¸æ­é…ã€‚ Signalæœ¬èº«çš„<code>url</code>ç”Ÿæˆéƒ½æ˜¯åŸºäºæ ¹ç›®å½•çš„ï¼Œè€Œåœ¨Pelicanä¸­éœ€è¦å°†<code>content</code>ä¸­çš„å†…å®¹æ¬åˆ°<code>output</code>ä¸‹çš„å­ç›®å½•ä¸­ï¼Œä½œä¸ºé™æ€åšå®¢çš„ä¸€ä¸ªå­éƒ¨åˆ†ï¼ŒåŸæ¥çš„ç›¸å¯¹è·¯å¾„éƒ½ä¸å¯¹ã€‚</p>
<p>åœ¨è¿™æ ·ä¸€ä¸ªé¡¹ç›®ä¸­è°ƒè¯•æ¯”è¾ƒéš¾(æˆ–è€…è¯´æˆ‘å‹æ ¹ä¸ä¼šåŠ æ–­ç‚¹è°ƒè¯•)ï¼Œå…¨é <code>logger</code>æä¾›ä¿¡æ¯ï¼Œæœ€åæ‰€æœ‰çš„<code>URL</code>ç”Ÿæˆéƒ½è¢«æˆ‘æ”¹æˆç”¨ç»å¯¹è·¯å¾„äº†(å¸¦å‚æ•°è‡ªåŠ¨é…ç½®)ã€‚ Debugä¸å¦‚é‡å†™æ¥å¾—å¿«ã€‚</p>
<p>é™†ç»­èŠ±äº†7å°æ—¶å·¦å³çš„æ—¶é—´ï¼Œé™æ€åšå®¢ä¹Ÿç”¨ä¸Šç›¸å†Œäº†ğŸ§</p>
    </div><!-- /.entry-content -->


  </article>


</section>

<div id="comments">
  <h2 style="margin-top: 0.1rem;">Comments !</h2>
  <div id="gitalk-container"></div>
</div>
<script>
  var gitalk = new Gitalk({
    clientID: '4dfbf5aad180623dc634',
    clientSecret: '4c7167883746062103d9dbc2ec8b1ddfd6780d58',
    repo: 'steermomo.github.io',
    owner: 'steermomo',
    admin: ['steermomo'],
    id: location.pathname,      // Ensure uniqueness and length less than 50
    distractionFreeMode: false,  // Facebook-like distraction free mode
    createIssueManually: true,
  })
  gitalk.render('gitalk-container')
</script>
        <section id="extras" class="body">
        </section><!-- /#extras -->
<footer id="contentinfo" class="body">
  <address id="about" class="vcard body">
    Copyright Â© 2024
    </br>
    Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a
      href="http://python.org">Python</a>.
  </address>

  <!-- /#about -->


</footer><!-- /#contentinfo -->



</body>

</html>