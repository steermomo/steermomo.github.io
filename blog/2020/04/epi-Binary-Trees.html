<!DOCTYPE html>
<html lang="en">

<head>
        <meta name="google-site-verification" content="d0pvXqLPH8JyCfWVyhZ7njhGUndRFIR95YM3myMb7rU" />
        <meta charset="utf-8" />
        <meta http-equiv="Cache-Control" content="no-transform" />
        <meta http-equiv="Cache-Control" content="no-siteapp" />
        <meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=yes" />
        <title>EPI-Binary Trees</title>
        <link rel="stylesheet" href="/theme/css/main.css" />

        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
        <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>


        <link rel="stylesheet" href="//unpkg.com/heti/umd/heti.min.css">

</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <!-- <h1><a href="/">steer </a></h1> -->
                <nav>
                        <ul>
                                <li><a href="/">ğŸ¦‰</a></li>
                                <li><a href="/blog">Blog</a></li>
                                <li><a href="/archives">Archives</a></li>
                                <li><a href="/gallery">Gallery</a></li>
                                <li id="navName">steer </li>
                        </ul>
                </nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/blog/2020/04/epi-Binary-Trees" rel="bookmark" title="Permalink to EPI-Binary Trees">EPI-Binary Trees</a>
      </h1>
    </header>

    <div class="entry-content">
<div class="post-meta">
        Date: <span >
               2020-04-05 Sun
        </span>
<span>Category: <a href="/category/leetcode/">LeetCode</a></span>
<!-- <p>tags: <a href="/tags/epi/">EPI</a> <a href="/tags/cpp/">cpp</a> </p> -->

</div><!-- /.post-info -->

      <p>å¾ˆä¹…å¾ˆä¹…ä»¥å‰ï¼Œæœ‰äººåˆ·é¢˜ä¸åšè®°å½•ï¼Œä»Arrayåˆ·åˆ°äºŒå‰æ ‘ï¼Œåˆ·äº†å‡ å¹´è¿˜æ˜¯åœ¨åˆ·äºŒå‰æ ‘ã€‚</p>
<p><img src="/images/what.jfif" style="max-width: 80%"></p>
<p>è¿™é‡Œè®°å½•ä¸€ä¸‹åš<strong>Elements of Programming Interviews</strong>çš„é¢˜ç›®ï¼Œé¿å…å››å¹´ä¹‹åè¿˜æ˜¯åœ¨åˆ·äºŒå‰æ ‘ã€‚</p>
<p>[TOC]</p>
<h2>Binary Trees</h2>
<h3>ç»“æ„å®šä¹‰</h3>
<div class="highlight"><pre><span></span><code><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">BinaryTreeNode</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">T</span><span class="w"> </span><span class="n">data</span><span class="p">;</span>
<span class="w">  </span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">BinaryTreeNode</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">left</span><span class="p">,</span><span class="w"> </span><span class="n">right</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<p>EPIè¿™éƒ¨åˆ†çš„å®šä¹‰ï¼Œè·Ÿæˆ‘ä¹‹å‰æ•°æ®ç»“æ„å­¦å¾—æœ‰ç‚¹ç‚¹åŒºåˆ«...å‡ä¹¦å®³äºº</p>
<ul>
<li>full binary treeï¼Œæ»¡äºŒå‰æ ‘ï¼Œéå¶ç»“ç‚¹éƒ½æœ‰ä¸¤ä¸ªå­ç»“ç‚¹</li>
<li>perfet binary treeï¼Œå®Œç¾äºŒå‰æ ‘ï¼Œæ·±åº¦ä¸ºkä¸”æœ‰2^(k+1)-1ä¸ªç»“ç‚¹(æ¯ä¸€å±‚éƒ½è¢«å®Œå…¨å¡«å……)ã€‚</li>
<li>complete binary treeï¼Œå®Œå…¨äºŒå‰æ ‘ï¼Œé™¤äº†æœ€åä¸€å±‚å¤–çš„å…¶ä»–æ¯ä¸€å±‚éƒ½è¢«å®Œå…¨å¡«å……ï¼Œå¹¶ä¸”æ‰€æœ‰ç»“ç‚¹ä¿æŒå·¦å¯¹é½</li>
</ul>
<h3>Test if a binary tree is height-balanced</h3>
<p>æµ‹è¯•äºŒå‰æ ‘çš„é«˜åº¦æ˜¯å¦å¹³è¡¡ï¼Œ åœ¨Leetcodeä¹Ÿåšè¿‡ï¼Œä¸åŒçš„æ˜¯æˆ‘å½“æ—¶ç”¨height=-1è¡¨ç¤ºå­æ ‘ä¸å¹³è¡¡ã€‚</p>
<p>EPIçš„åšæ³•è›®æœ‰æ„æ€ï¼Œå®šä¹‰äº†ä¸€ä¸ªç»“æ„ä½“ï¼Œé€šè¿‡è¿”å›ç»“æ„ä½“çš„å½¢å¼è¿”å›å¤šä¸ªå‚æ•°å€¼ï¼Œæ˜¯æˆ‘ä¹‹å‰æ²¡è§è¿‡çš„ã€‚</p>
<div class="highlight"><pre><span></span><code><span class="k">struct</span><span class="w"> </span><span class="nc">BalancedSatusWithHeight</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="n">balanced</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">height</span><span class="p">;</span>
<span class="p">};</span>
<span class="n">BalancedSatusWithHeight</span><span class="w"> </span><span class="nf">CheckBalanced</span><span class="p">(</span>
<span class="w">        </span><span class="k">const</span><span class="w"> </span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">BinaryTreeNode</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">tree</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">tree</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="k">nullptr</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="p">{</span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="mi">-1</span><span class="p">};</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">left_result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CheckBalanced</span><span class="p">(</span><span class="n">tree</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">left_result</span><span class="p">.</span><span class="n">balanced</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="p">{</span><span class="nb">false</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">};</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">right_result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CheckBalanced</span><span class="p">(</span><span class="n">tree</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">right_result</span><span class="p">.</span><span class="n">balanced</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="p">{</span><span class="nb">false</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">};</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="n">is_balanced</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">abs</span><span class="p">(</span><span class="n">left_result</span><span class="p">.</span><span class="n">height</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">right_result</span><span class="p">.</span><span class="n">height</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">max</span><span class="p">(</span><span class="n">left_result</span><span class="p">.</span><span class="n">height</span><span class="p">,</span><span class="w"> </span><span class="n">right_result</span><span class="p">.</span><span class="n">height</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">{</span><span class="n">is_balanced</span><span class="p">,</span><span class="w"> </span><span class="n">height</span><span class="p">};</span>
<span class="p">}</span>
<span class="kt">bool</span><span class="w"> </span><span class="nf">IsBalanced</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">BinaryTreeNode</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;&amp;</span><span class="w"> </span><span class="n">tree</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// TODO - you fill in here.</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">CheckBalanced</span><span class="p">(</span><span class="n">tree</span><span class="p">).</span><span class="n">balanced</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<h3>Test if a binary tree is symmetric</h3>
<p>æ£€æµ‹æ ‘æ˜¯å¦å¯¹ç§°ï¼Œæ£€æµ‹æ ¹ç»“ç‚¹çš„å·¦å³å­æ ‘æ˜¯å¦å¯¹ç§°å³å¯ã€‚</p>
<p>å‰åºéå†ï¼Œ å·¦å³å­æ ‘åˆ†åˆ«ç”¨ä¸­å·¦å³ã€ä¸­å³å·¦çš„é¡ºåºã€‚</p>
<div class="highlight"><pre><span></span><code><span class="kt">bool</span><span class="w"> </span><span class="nf">CheckSymmetrice</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">BinaryTreeNode</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="o">&amp;</span><span class="n">left</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">BinaryTreeNode</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="o">&amp;</span><span class="n">right</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">left</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="o">!</span><span class="n">right</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">left</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">!</span><span class="n">right</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">left</span><span class="o">-&gt;</span><span class="n">data</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">right</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">CheckSymmetrice</span><span class="p">(</span><span class="n">left</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">,</span><span class="w"> </span><span class="n">right</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">CheckSymmetrice</span><span class="p">(</span><span class="n">left</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">,</span><span class="w"> </span><span class="n">right</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">);</span>
<span class="p">}</span>
<span class="kt">bool</span><span class="w"> </span><span class="nf">IsSymmetric</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">BinaryTreeNode</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;&amp;</span><span class="w"> </span><span class="n">tree</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// TODO - you fill in here.</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">tree</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">CheckSymmetrice</span><span class="p">(</span><span class="n">tree</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">,</span><span class="w"> </span><span class="n">tree</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<h3>Compute the lowest common ancestor in a binary tree</h3>
<p>æŸ¥æ‰¾ä¸¤ä¸ªç»“ç‚¹çš„æœ€è¿‘å…¬å…±ç¥–å…ˆã€‚</p>
<p>åœ¨çœ‹è§£æä¹‹å‰ï¼Œæˆ‘åªèƒ½æƒ³åˆ°æš´åŠ›çš„è§£æ³•ï¼Œéå†æ¯ä¸ªç»“ç‚¹ï¼Œleetcodeå¥½åƒä¹Ÿæ˜¯å¯ä»¥è¿‡è¿™ä¸ªæš´åŠ›è§£çš„ã€‚</p>
<p>å…³é”®ç‚¹åº”è¯¥æ˜¯åœ¨äºæƒ³æ¸…æ¥šé—®é¢˜çš„å½¢å¼ï¼Œå¯¹äºä¸¤ä¸ªç»“ç‚¹çš„æœ€è¿‘å…¬å…±ç¥–å…ˆæ¥è¯´ï¼Œè¿™ä¸¤ä¸ªç»“ç‚¹è‚¯å®šä¸æ˜¯åœ¨åŒä¸€ä¸ªå­æ ‘ä¸­ï¼Œå¦åˆ™è¿˜å¯ä»¥å‘ä¸‹æ·±å…¥ä¸€å±‚ã€‚</p>
<p>é‚£ä¹ˆåœ¨è‡ªåº•å‘ä¸Šçš„æŸ¥æ‰¾è¿‡ç¨‹ä¸­ï¼Œè®°å½•å½“å‰å·²ç»æ‰¾åˆ°çš„ç»“ç‚¹çš„ä¸ªæ•°ï¼Œå¯ä»¥é¿å…å¤šæ¬¡éå†ã€‚</p>
<div class="highlight"><pre><span></span><code><span class="k">struct</span><span class="w"> </span><span class="nc">Status</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">num_target_nodes</span><span class="p">;</span>
<span class="w">    </span><span class="n">BinaryTreeNode</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;*</span><span class="w"> </span><span class="n">ancestor</span><span class="p">;</span>
<span class="p">};</span>
<span class="n">Status</span><span class="w"> </span><span class="nf">LCAHelper</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">BinaryTreeNode</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;&amp;</span><span class="w"> </span><span class="n">tree</span><span class="p">,</span>
<span class="w">                 </span><span class="k">const</span><span class="w"> </span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">BinaryTreeNode</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;&amp;</span><span class="w"> </span><span class="n">node0</span><span class="p">,</span>
<span class="w">                 </span><span class="k">const</span><span class="w"> </span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">BinaryTreeNode</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;&amp;</span><span class="w"> </span><span class="n">node1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">tree</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="k">nullptr</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="p">{</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">nullptr</span><span class="p">};</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="c1">// æŸ¥æ‰¾å·¦å­æ ‘</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">left_result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LCAHelper</span><span class="p">(</span><span class="n">tree</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">,</span><span class="w"> </span><span class="n">node0</span><span class="p">,</span><span class="w"> </span><span class="n">node1</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">left_result</span><span class="p">.</span><span class="n">num_target_nodes</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">2</span><span class="p">){</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">left_result</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="c1">// æŸ¥æ‰¾å³å­æ ‘</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">right_result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LCAHelper</span><span class="p">(</span><span class="n">tree</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">,</span><span class="w"> </span><span class="n">node0</span><span class="p">,</span><span class="w"> </span><span class="n">node1</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">right_result</span><span class="p">.</span><span class="n">num_target_nodes</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">right_result</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="c1">// å¦‚æœå½“å‰ç»“ç‚¹æˆ–å·¦å³å­æ ‘çš„ç›®æ ‡å’Œä¸º2 åˆ™å½“å‰ä¸ºç›®æ ‡ç»“ç‚¹</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">num_target_nodes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">left_result</span><span class="p">.</span><span class="n">num_target_nodes</span><span class="w"> </span><span class="o">+</span>
<span class="w">            </span><span class="n">right_result</span><span class="p">.</span><span class="n">num_target_nodes</span><span class="w"> </span><span class="o">+</span>
<span class="w">            </span><span class="p">(</span><span class="n">tree</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">node0</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="n">tree</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">node1</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">{</span><span class="n">num_target_nodes</span><span class="p">,</span><span class="w"> </span><span class="n">num_target_nodes</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">tree</span><span class="p">.</span><span class="n">get</span><span class="p">()</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">nullptr</span><span class="p">};</span>
<span class="p">}</span>
<span class="n">BinaryTreeNode</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;*</span><span class="w"> </span><span class="n">Lca</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">BinaryTreeNode</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;&amp;</span><span class="w"> </span><span class="n">tree</span><span class="p">,</span>
<span class="w">                         </span><span class="k">const</span><span class="w"> </span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">BinaryTreeNode</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;&amp;</span><span class="w"> </span><span class="n">node0</span><span class="p">,</span>
<span class="w">                         </span><span class="k">const</span><span class="w"> </span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">BinaryTreeNode</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;&amp;</span><span class="w"> </span><span class="n">node1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// TODO - you fill in here.</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">LCAHelper</span><span class="p">(</span><span class="n">tree</span><span class="p">,</span><span class="w"> </span><span class="n">node0</span><span class="p">,</span><span class="w"> </span><span class="n">node1</span><span class="p">).</span><span class="n">ancestor</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<h3>Compute the LCA when nodes have parent pointers</h3>
<p>è¿˜æ˜¯æŸ¥æ‰¾LCAï¼Œä¸åŒçš„æ˜¯æœ‰äº†çˆ¶ç»“ç‚¹æŒ‡é’ˆã€‚</p>
<p>åˆ†åˆ«ä»ä¸¤ä¸ªç»“ç‚¹å‘ä¸ŠæŸ¥æ‰¾ï¼Œè®°å½•è·¯å¾„ã€‚å¯¹é½æ ¹èŠ‚ç‚¹åï¼Œä»åå‘å‰æŸ¥æ‰¾ï¼Œæœ€åä¸€ä¸ªç›¸åŒçš„ç»“ç‚¹å³ä¸ºæœ€è¿‘ç¥–å…ˆã€‚</p>
<p>è¿™é‡Œä½¿ç”¨äº†O(h)çš„ç©ºé—´ï¼Œå¦‚æœè®°å½•æ ‘çš„é«˜åº¦ï¼ŒåŒæ—¶åªåœ¨æ ‘ä¸Šæ“ä½œçš„è¯ï¼Œå¯ä»¥é¿å…è¿™ä¸€å¼€é”€ã€‚</p>
<div class="highlight"><pre><span></span><code><span class="n">BinaryTreeNode</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;*</span><span class="w"> </span><span class="n">Lca</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">BinaryTreeNode</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;&amp;</span><span class="w"> </span><span class="n">node0</span><span class="p">,</span>
<span class="w">                         </span><span class="k">const</span><span class="w"> </span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">BinaryTreeNode</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;&amp;</span><span class="w"> </span><span class="n">node1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// TODO - you fill in here.</span>
<span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">BinaryTreeNode</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;*&gt;</span><span class="w"> </span><span class="n">path0</span><span class="p">,</span><span class="w"> </span><span class="n">path1</span><span class="p">;</span>
<span class="w">  </span><span class="n">BinaryTreeNode</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="o">*</span><span class="n">p0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">node0</span><span class="p">.</span><span class="n">get</span><span class="p">(),</span><span class="w"> </span><span class="o">*</span><span class="n">p1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">node1</span><span class="p">.</span><span class="n">get</span><span class="p">();</span>
<span class="w">  </span><span class="c1">// æŸ¥æ‰¾node0çš„è·¯å¾„</span>
<span class="w">  </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">p0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">path0</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">p0</span><span class="p">);</span>
<span class="w">      </span><span class="n">p0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p0</span><span class="o">-&gt;</span><span class="n">parent</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="c1">// æŸ¥æ‰¾node1çš„è·¯å¾„</span>
<span class="w">  </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">p1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">path1</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">p1</span><span class="p">);</span>
<span class="w">      </span><span class="n">p1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p1</span><span class="o">-&gt;</span><span class="n">parent</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="c1">// å¯¹é½æ ¹ç»“ç‚¹</span>
<span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">idx0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">path0</span><span class="p">.</span><span class="n">size</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">idx1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">path1</span><span class="p">.</span><span class="n">size</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">  </span><span class="k">while</span><span class="p">(</span><span class="n">idx0</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">idx1</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">path0</span><span class="p">[</span><span class="n">idx0</span><span class="p">]</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">path1</span><span class="p">[</span><span class="n">idx1</span><span class="p">])</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="k">break</span><span class="p">;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">      </span><span class="o">--</span><span class="n">idx0</span><span class="p">,</span><span class="w"> </span><span class="o">--</span><span class="n">idx1</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">path0</span><span class="p">[</span><span class="n">idx0</span><span class="o">+</span><span class="mi">1</span><span class="p">];</span>
<span class="p">}</span>
</code></pre></div>

<h3>Sum the root-to-leaf paths in a binary tree</h3>
<p>äºŒå‰æ ‘æ¯ä¸ªç»“ç‚¹å†…åŒ…å«äºŒå€¼(0ï¼Œ 1)ï¼Œ ä»æ ¹ç»“ç‚¹åˆ°å¶ç»“ç‚¹çš„åºåˆ—å¯ä»¥ç»„æˆä¸€ä¸ªäºŒè¿›åˆ¶åºåˆ—ï¼Œè®¡ç®—æ ‘ä¸­æ‰€æœ‰åºåˆ—çš„å’Œã€‚</p>
<p>è¿™ä¸ªé€’å½’çš„æ€è·¯è¿˜æ˜¯æ¯”è¾ƒæ¸…æ™°ï¼Œ å‘ä¸‹è°ƒç”¨çš„æ—¶å€™ï¼Œç›¸å½“äºç§¯æ”’è·¯å¾„ä¸Šçš„å€¼ï¼Œåˆ°è¾¾å¶ç»“ç‚¹åï¼Œè¿”å›æ¯ä¸ªå¶ç»“ç‚¹åºåˆ—çš„å€¼å¹¶æ±‚å’Œã€‚</p>
<div class="highlight"><pre><span></span><code><span class="kt">int</span><span class="w"> </span><span class="nf">SumRootToLeafHelper</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">BinaryTreeNode</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;&amp;</span><span class="w"> </span><span class="n">tree</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">partial_sum</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">tree</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">partial_sum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">partial_sum</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">tree</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">;</span>
<span class="w">    </span><span class="c1">// å¶ç»“ç‚¹</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">tree</span><span class="o">-&gt;</span><span class="n">left</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="o">!</span><span class="n">tree</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">partial_sum</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">SumRootToLeafHelper</span><span class="p">(</span><span class="n">tree</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">,</span><span class="w"> </span><span class="n">partial_sum</span><span class="p">)</span><span class="w"> </span><span class="o">+</span>
<span class="w">            </span><span class="n">SumRootToLeafHelper</span><span class="p">(</span><span class="n">tree</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">,</span><span class="w"> </span><span class="n">partial_sum</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">SumRootToLeaf</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">BinaryTreeNode</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;&amp;</span><span class="w"> </span><span class="n">tree</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// TODO - you fill in here.</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">SumRootToLeafHelper</span><span class="p">(</span><span class="n">tree</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<h3>Find a root to leaf path with specified sum</h3>
<p>åˆ¤æ–­äºŒå‰æ ‘ä¸­æ˜¯å¦å­˜åœ¨è·¯å¾„å’Œä¸ºtarget numçš„è·¯å¾„</p>
<div class="highlight"><pre><span></span><code><span class="kt">bool</span><span class="w"> </span><span class="nf">HasPathSumHelper</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">BinaryTreeNode</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;&amp;</span><span class="w"> </span><span class="n">tree</span><span class="p">,</span>
<span class="w">                        </span><span class="kt">int</span><span class="w"> </span><span class="n">current_sum</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">target</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">tree</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">current_sum</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">tree</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">;</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">tree</span><span class="o">-&gt;</span><span class="n">left</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="o">!</span><span class="n">tree</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">current_sum</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">target</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">HasPathSumHelper</span><span class="p">(</span><span class="n">tree</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">,</span><span class="w"> </span><span class="n">current_sum</span><span class="p">,</span><span class="w"> </span><span class="n">target</span><span class="p">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">HasPathSumHelper</span><span class="p">(</span><span class="n">tree</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">,</span><span class="w"> </span><span class="n">current_sum</span><span class="p">,</span><span class="w"> </span><span class="n">target</span><span class="p">);</span>
<span class="p">}</span>
<span class="kt">bool</span><span class="w"> </span><span class="nf">HasPathSum</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">BinaryTreeNode</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;&amp;</span><span class="w"> </span><span class="n">tree</span><span class="p">,</span>
<span class="w">                </span><span class="kt">int</span><span class="w"> </span><span class="n">remaining_weight</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// TODO - you fill in here.</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">HasPathSumHelper</span><span class="p">(</span><span class="n">tree</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">remaining_weight</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<h3>Implement an inorder traversal without recursion</h3>
<p>ä¸èƒ½ç”¨é€’å½’éå†çš„è¯ï¼Œå¯ä»¥é€‰æ‹©ä½¿ç”¨æ ˆï¼Œéœ€è¦æ³¨æ„å‹æ ˆé¡ºåºã€‚</p>
<p>~~æˆ‘åªèƒ½ç”¨å•ä¸ªæ ˆå®ç°å‰åºéå†...~~</p>
<p>è¿˜æ˜¯éœ€è¦æ¨¡æ‹Ÿä¸­åºéå†çš„æƒ…å†µï¼Œå…ˆå°½å¯èƒ½å‘å·¦ï¼Œåˆ°è¾¾å¶ç»“ç‚¹åè®¿é—®å€¼åŸŸï¼Œå†å‘å³å‘å·¦è®¿é—®ã€‚</p>
<div class="highlight"><pre><span></span><code><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">InorderTraversal</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">BinaryTreeNode</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;&amp;</span><span class="w"> </span><span class="n">tree</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// TODO - you fill in here.</span>
<span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">stack</span><span class="o">&lt;</span><span class="n">BinaryTreeNode</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;*&gt;</span><span class="w"> </span><span class="n">stk</span><span class="p">;</span>
<span class="w">  </span><span class="k">auto</span><span class="w"> </span><span class="n">curr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tree</span><span class="p">.</span><span class="n">get</span><span class="p">();</span>
<span class="w">  </span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">ret</span><span class="p">;</span>
<span class="w">  </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">stk</span><span class="p">.</span><span class="n">empty</span><span class="p">()</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">curr</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">curr</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="n">stk</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">curr</span><span class="p">);</span>
<span class="w">          </span><span class="n">curr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">curr</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">.</span><span class="n">get</span><span class="p">();</span>
<span class="w">      </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="c1">// curr ä¸ºç©º, ä¸Šä¸€ä¸ªç»“ç‚¹ä¸ºå¶ç»“ç‚¹</span>
<span class="w">          </span><span class="n">curr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">stk</span><span class="p">.</span><span class="n">top</span><span class="p">();</span>
<span class="w">          </span><span class="n">stk</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
<span class="w">          </span><span class="n">ret</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">curr</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">);</span><span class="w"> </span><span class="c1">// è®¿é—®å½“å‰ç»“ç‚¹</span>
<span class="w">          </span><span class="n">curr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">curr</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">.</span><span class="n">get</span><span class="p">();</span><span class="w"> </span><span class="c1">// å‘å³è®¿é—®ä¸€æ¬¡</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">ret</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<h3>Compute the kth node in an inorder traversal</h3>
<div class="highlight"><pre><span></span><code><span class="k">const</span><span class="w"> </span><span class="n">BinaryTreeNode</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;*</span><span class="w"> </span><span class="n">FindKthNodeBinaryTree</span><span class="p">(</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">BinaryTreeNode</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;&amp;</span><span class="w"> </span><span class="n">tree</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">k</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// TODO - you fill in here.</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">stack</span><span class="o">&lt;</span><span class="n">BinaryTreeNode</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;*&gt;</span><span class="w"> </span><span class="n">stk</span><span class="p">;</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">curr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tree</span><span class="p">.</span><span class="n">get</span><span class="p">();</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">c_th</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">stk</span><span class="p">.</span><span class="n">empty</span><span class="p">()</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">curr</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">curr</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">stk</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">curr</span><span class="p">);</span>
<span class="w">            </span><span class="n">curr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">curr</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">.</span><span class="n">get</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// curr ä¸ºç©º, ä¸Šä¸€ä¸ªç»“ç‚¹ä¸ºå¶ç»“ç‚¹</span>
<span class="w">            </span><span class="n">curr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">stk</span><span class="p">.</span><span class="n">top</span><span class="p">();</span>
<span class="w">            </span><span class="n">stk</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
<span class="w">            </span><span class="o">++</span><span class="n">c_th</span><span class="p">;</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">c_th</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">k</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="n">curr</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">            </span><span class="n">curr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">curr</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">.</span><span class="n">get</span><span class="p">();</span><span class="w"> </span><span class="c1">// å‘å³è®¿é—®ä¸€æ¬¡</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="k">nullptr</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<h3>Compute the successor</h3>
<p>successor æ˜¯åœ¨ä¸­åºéå†ä¸­å‡ºç°åœ¨ç»™å®šç»“ç‚¹åçš„ç»“ç‚¹ã€‚å‡è®¾æ¯ä¸ªç»“ç‚¹éƒ½æœ‰çˆ¶èŠ‚ç‚¹çš„ä¿¡æ¯ã€‚</p>
<p>æœ€ç®€å•çš„æ–¹æ³•æ˜¯ï¼Œé€šè¿‡çˆ¶èŠ‚ç‚¹æŒ‡é’ˆä¸€ç›´æ‰¾åˆ°æ ¹èŠ‚ç‚¹ï¼Œå†ä¸­åºéå†ã€‚è™½ç„¶è¿™æ ·å¤šäº†å¾ˆå¤šä¸å¿…è¦çš„è®¡ç®—ã€‚</p>
<p>å¦‚æœè¯¥ç»“ç‚¹æœ‰å³å­æ ‘çš„è¯ï¼Œsuccessorå°±æ˜¯ä¸­åºéå†å³å­æ ‘æ—¶çš„ç¬¬ä¸€ä¸ªç»“ç‚¹ã€‚</p>
<p>~~å¦‚æœè¯¥ç»“ç‚¹æ²¡æœ‰å³å­æ ‘ï¼Œåˆå¯ä»¥åˆ†ä¸¤ç§æƒ…å†µ~~</p>
<ul>
<li>~~è¯¥ç»“ç‚¹æ˜¯å·¦å­æ ‘ï¼Œsuccessorå°±æ˜¯çˆ¶ç»“ç‚¹~~</li>
<li>~~è¯¥ç»“ç‚¹æ˜¯å³å­æ ‘ï¼Œsuccessoræ˜¯çˆ¶ç»“ç‚¹çš„çˆ¶ç»“ç‚¹~~</li>
</ul>
<p>ä¸Šé¢çš„æƒ…å†µè€ƒè™‘ä¸å¤Ÿå®Œå¤‡ï¼Œå¦‚æœçˆ¶èŠ‚ç‚¹ä¹Ÿæ˜¯åœ¨å³å­æ ‘ä¸­çš„è¯ï¼Œä¸Šè¿°çš„æƒ…å†µæ˜¯ä¸æ»¡è¶³çš„ã€‚ è¿™é‡Œè¦æ‰¾çš„æ˜¯æœ€è¿‘çš„ä¸”ä½äºå·¦å­æ ‘ä¸­çš„ç¥–å…ˆç»“ç‚¹ï¼Œè¿™æ ·å®ƒçš„çˆ¶ç»“ç‚¹æ‰æ˜¯åœ¨ä¸­åºéå†æ—¶ä¼šè®¿é—®åˆ°çš„ä¸‹ä¸€ä¸ªç»“ç‚¹ã€‚</p>
<div class="highlight"><pre><span></span><code><span class="n">BinaryTreeNode</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;*</span><span class="w"> </span><span class="n">FindSuccessor</span><span class="p">(</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">BinaryTreeNode</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;&amp;</span><span class="w"> </span><span class="n">node</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// TODO - you fill in here.</span>

<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">.</span><span class="n">get</span><span class="p">()</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="k">nullptr</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">auto</span><span class="w"> </span><span class="n">curr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">node</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">.</span><span class="n">get</span><span class="p">();</span>
<span class="w">      </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">curr</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">curr</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">.</span><span class="n">get</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="n">curr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">curr</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">.</span><span class="n">get</span><span class="p">();</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="n">curr</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="k">auto</span><span class="w"> </span><span class="o">*</span><span class="n">curr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">node</span><span class="p">.</span><span class="n">get</span><span class="p">();</span>
<span class="w">  </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">curr</span><span class="o">-&gt;</span><span class="n">parent</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="k">nullptr</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">curr</span><span class="o">-&gt;</span><span class="n">parent</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">.</span><span class="n">get</span><span class="p">()</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">curr</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">curr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">curr</span><span class="o">-&gt;</span><span class="n">parent</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">curr</span><span class="o">-&gt;</span><span class="n">parent</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<h3>Implement an inorder traversal with constant space</h3>
<p>ä¸ä½¿ç”¨é¢å¤–ç©ºé—´å®ç°ä¸­åºéå†ï¼Œç»“ç‚¹å«æœ‰çˆ¶ç»“ç‚¹ä¿¡æ¯ã€‚</p>
<p>è¿™é‡Œçˆ¶ç»“ç‚¹ä¿¡æ¯æ˜¯è§£å†³é—®é¢˜çš„å…³é”®ï¼Œå¯æ˜¯ä¸ä¼šç”¨å•Š...çœ‹è§£æå§</p>
<p>è¦æ±‚ä¸å¼€è¾Ÿæ–°ç©ºé—´å­˜å‚¨ï¼Œå°±éœ€è¦æ‰‹åŠ¨ä½¿ç”¨æŒ‡é’ˆåœ¨äºŒå‰æ ‘ä¸Šç§»åŠ¨ã€‚</p>
<p>é‚£ä¹ˆå°±éœ€è¦çŸ¥é“å½“å‰çš„æŒ‡é’ˆæ˜¯å¤„äºä»€ä¹ˆçŠ¶æ€ï¼Œ è¿™é‡Œå°†æŒ‡é’ˆçš„çŠ¶æ€å½’ç±»ä¸º</p>
<ul>
<li>å‘ä¸‹è®¿é—®é˜¶æ®µ</li>
<li>æœ‰å·¦å­æ ‘ï¼Œç»§ç»­å¾€ä¸‹</li>
<li>æ— å·¦å­æ ‘ï¼Œè®¿é—®æ•°æ®åŸŸï¼Œå‘ä¸Šè®¿é—®</li>
<li>ä»å­æ ‘è¿”å›é˜¶æ®µ</li>
<li>æ˜¯ä»å·¦å­æ ‘è¿”å›çš„ï¼Œè®¿é—®æ•°æ®åŸŸï¼Œè®¿é—®å³å­æ ‘</li>
<li>æ˜¯ä»å³å­æ ‘è¿”å›çš„ï¼Œåˆ™æ•´ä¸ªåˆ†æ”¯è®¿é—®å®Œæˆï¼Œè¿”å›ä¸Šå±‚</li>
</ul>
<p>ç”±ä¸Šé¢çš„åˆ†ç±»å¯ä»¥çœ‹å‡ºï¼Œéœ€è¦æ˜ç¡®æŒ‡é’ˆçš„çŠ¶æ€æ‰èƒ½æ§åˆ¶ä¸‹ä¸€æ­¥çš„ç§»åŠ¨æ–¹å‘ã€‚ è¿™é‡Œä½¿ç”¨åŒæŒ‡é’ˆprevå’Œcurråˆ¤æ–­å½“å‰æŒ‡é’ˆçŠ¶æ€ã€‚</p>
<div class="highlight"><pre><span></span><code><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">InorderTraversal</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">BinaryTreeNode</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;&amp;</span><span class="w"> </span><span class="n">tree</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// TODO - you fill in here.</span>
<span class="w">  </span><span class="n">BinaryTreeNode</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="o">*</span><span class="n">prev</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">nullptr</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="n">curr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tree</span><span class="p">.</span><span class="n">get</span><span class="p">();</span>
<span class="w">  </span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">ret</span><span class="p">;</span>
<span class="w">  </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">curr</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="k">nullptr</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">BinaryTreeNode</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;*</span><span class="w"> </span><span class="n">next</span><span class="p">;</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">curr</span><span class="o">-&gt;</span><span class="n">parent</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">prev</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="c1">// æ˜¯ä»ä¸Šå¾€ä¸‹è®¿é—®</span>
<span class="w">          </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">curr</span><span class="o">-&gt;</span><span class="n">left</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="k">nullptr</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="c1">// æœ‰å·¦å­æ ‘ï¼Œç»§ç»­å¾€ä¸‹</span>
<span class="w">              </span><span class="n">next</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">curr</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">.</span><span class="n">get</span><span class="p">();</span>
<span class="w">          </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="c1">// åˆ°è¾¾å¶ç»“ç‚¹ï¼Œ è®¿é—®æ•°æ®</span>
<span class="w">              </span><span class="n">ret</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">curr</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">);</span>
<span class="w">              </span><span class="c1">// å¦‚æœæœ‰å³å­æ ‘ï¼Œ ç»§ç»­å‘å³ï¼Œå¦åˆ™å½“å‰åˆ†æ”¯ç»“æŸï¼Œå‘ä¸Š</span>
<span class="w">              </span><span class="n">next</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">curr</span><span class="o">-&gt;</span><span class="n">right</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="k">nullptr</span><span class="p">)</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">curr</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">.</span><span class="n">get</span><span class="p">()</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">curr</span><span class="o">-&gt;</span><span class="n">parent</span><span class="p">;</span>
<span class="w">          </span><span class="p">}</span>
<span class="w">      </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">curr</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">.</span><span class="n">get</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">prev</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="c1">// æ˜¯ä»å·¦å­æ ‘å‘ä¸Šå›æº¯</span>
<span class="w">          </span><span class="n">ret</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">curr</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">);</span>
<span class="w">          </span><span class="n">next</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">curr</span><span class="o">-&gt;</span><span class="n">right</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="k">nullptr</span><span class="p">)</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">curr</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">.</span><span class="n">get</span><span class="p">()</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">curr</span><span class="o">-&gt;</span><span class="n">parent</span><span class="p">;</span>
<span class="w">      </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="n">next</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">curr</span><span class="o">-&gt;</span><span class="n">parent</span><span class="p">;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">      </span><span class="n">prev</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">curr</span><span class="p">;</span>
<span class="w">      </span><span class="n">curr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">next</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">ret</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<h3>Reconstruct a binary tree from traversal data</h3>
<p>...</p>
<p>...</p>
<p>...</p>
<p>å¿˜äº†</p>
<p>è¿™ä¸ªåœ¨æƒ³æ³•ä¸Šè¿˜æ˜¯å¾ˆå®¹æ˜“ç†è§£ï¼Œå‰åºéå†çš„ç¬¬ä¸€ä¸ªä½ç½®æ˜¯æ ¹ç»“ç‚¹çš„å€¼ï¼Œåœ¨ä¸­åºéå†ä¸­æ ¹ç»“ç‚¹çš„å·¦å³ä¸¤è¾¹åˆ†åˆ«æ˜¯å·¦å³å­æ ‘ã€‚</p>
<p>æ‹¿ç€å‰åºéå†çš„æ ¹ç»“ç‚¹å€¼å°±èƒ½å°†ä¸­åºçš„åºåˆ—åˆ†å¼€ï¼Œå¹¶é€’å½’åœ°å¾€ä¸‹å¤„ç†ã€‚è¿™æ ·å°±èƒ½è‡ªåº•å‘ä¸Šåœ°åˆ›å»ºæ¯ä¸€ä¸ªç»“ç‚¹ã€‚</p>
<p>é‚£ä¹ˆåœ¨å¤„ç†æ—¶å°±éœ€è¦å°†æ¯ä¸ªå­æ ‘çš„å‰åºåŒºé—´è·Ÿä¸­åºåŒºé—´æŒ‡ç¤ºå‡ºæ¥ã€‚å¹¶ä¸”å·²çŸ¥æ ¹ç»“ç‚¹çš„å€¼ï¼Œéœ€è¦åœ¨ä¸­åºéå†åºåˆ—ä¸­æŸ¥æ‰¾å…¶ä¸‹æ ‡ï¼Œé€šè¿‡æ„å»ºhashtableçš„æ–¹å¼å°†æŸ¥æ‰¾çš„æ—¶é—´å¤æ‚åº¦ä»O(n)é™ä½åˆ°O(1)ã€‚æ€»çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(n)ï¼Œç©ºé—´å¤æ‚åº¦ä¸ºO(h+n)ã€‚</p>
<p>EPIçš„ä»£ç ä¸­ç”¨äº†<code>make_unique</code>è®©åˆ›å»ºç»“ç‚¹çš„è¿™ä¸ªè¿‡ç¨‹ç›´è§‚äº†å¾ˆå¤šã€‚</p>
<div class="highlight"><pre><span></span><code><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">BinaryTreeNode</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">BinaryTreeFromPreorderInorderHelper</span><span class="p">(</span>
<span class="w">        </span><span class="k">const</span><span class="w"> </span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span><span class="w"> </span><span class="n">preorder</span><span class="p">,</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">preorder_start</span><span class="p">,</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">preorder_end</span><span class="p">,</span>
<span class="w">        </span><span class="kt">size_t</span><span class="w"> </span><span class="n">inorder_start</span><span class="p">,</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">inorder_end</span><span class="p">,</span>
<span class="w">        </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">unordered_map</span><span class="o">&lt;</span><span class="kt">int</span><span class="w"> </span><span class="p">,</span><span class="kt">size_t</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&amp;</span><span class="n">node_to_inorder_idx</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// åŒºé—´å†…æ— æœ‰æ•ˆçš„å€¼</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">preorder_end</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">preorder_start</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">inorder_end</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">inorder_start</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">nullptr</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="kt">size_t</span><span class="w"> </span><span class="n">root_inorder_idx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">node_to_inorder_idx</span><span class="p">.</span><span class="n">at</span><span class="p">(</span><span class="n">preorder</span><span class="p">[</span><span class="n">preorder_start</span><span class="p">]);</span>
<span class="w">    </span><span class="kt">size_t</span><span class="w">  </span><span class="n">left_subtree_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">root_inorder_idx</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">inorder_start</span><span class="p">;</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">BinaryTreeNode</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">BinaryTreeNode</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">{</span>
<span class="w">        </span><span class="n">preorder</span><span class="p">[</span><span class="n">preorder_start</span><span class="p">],</span>
<span class="w">        </span><span class="n">BinaryTreeFromPreorderInorderHelper</span><span class="p">(</span>
<span class="w">                </span><span class="n">preorder</span><span class="p">,</span><span class="w"> </span><span class="n">preorder_start</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">preorder_start</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">left_subtree_size</span><span class="p">,</span>
<span class="w">                </span><span class="n">inorder_start</span><span class="p">,</span><span class="w"> </span><span class="n">root_inorder_idx</span><span class="p">,</span><span class="w"> </span><span class="n">node_to_inorder_idx</span><span class="p">),</span>
<span class="w">        </span><span class="n">BinaryTreeFromPreorderInorderHelper</span><span class="p">(</span>
<span class="w">                </span><span class="n">preorder</span><span class="p">,</span><span class="w"> </span><span class="n">preorder_start</span><span class="o">+</span><span class="mi">1</span><span class="o">+</span><span class="n">left_subtree_size</span><span class="p">,</span><span class="w"> </span><span class="n">preorder_end</span><span class="p">,</span>
<span class="w">                </span><span class="n">root_inorder_idx</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">inorder_end</span><span class="p">,</span><span class="w"> </span><span class="n">node_to_inorder_idx</span><span class="p">)</span>
<span class="w">    </span><span class="p">});</span>
<span class="p">}</span>

<span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">BinaryTreeNode</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">BinaryTreeFromPreorderInorder</span><span class="p">(</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span><span class="w"> </span><span class="n">preorder</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span><span class="w"> </span><span class="n">inorder</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// TODO - you fill in here.</span>
<span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">unordered_map</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">node_to_inorder_idx</span><span class="p">;</span>
<span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">size_t</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">inorder</span><span class="p">.</span><span class="n">size</span><span class="p">();</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">node_to_inorder_idx</span><span class="p">.</span><span class="n">emplace</span><span class="p">(</span><span class="n">inorder</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="w"> </span><span class="n">i</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">BinaryTreeFromPreorderInorderHelper</span><span class="p">(</span><span class="n">preorder</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">preorder</span><span class="p">.</span><span class="n">size</span><span class="p">(),</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">inorder</span><span class="p">.</span><span class="n">size</span><span class="p">(),</span><span class="w"> </span><span class="n">node_to_inorder_idx</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<h3>Reconstruct a binary tree from a preorder traversal with markers</h3>
<p>ç”¨nullè¡¨ç¤ºå…ˆåºéå†ä¸­ç©ºçš„å­ç»“ç‚¹ï¼Œä»è¿™æ ·çš„å…ˆåºéå†åºåˆ—é‡å»ºäºŒå‰æ ‘ã€‚</p>
<p>ã€‚ã€‚ã€‚</p>
<p>ä¸ä¼š</p>
<p>ç€æ‰‹ç‚¹åœ¨äºnullã€‚ äºä¸Šä¸€é¢˜ç›¸æ¯”ï¼Œ è¿™é‡Œåªéœ€è¦å‰åºéå†å°±èƒ½é‡å»ºæ ‘ï¼Œå› ä¸ºnullç»“ç‚¹æä¾›äº†é¢å¤–çš„ä¿¡æ¯ï¼ŒæŒ‡ç¤ºäº†åº”è¯¥åœ¨ä»€ä¹ˆæ—¶å€™åœæ­¢å‘ä¸‹åˆ›å»ºå­æ ‘ã€‚</p>
<p>å¦å¤–åº”è¯¥åˆ©ç”¨çš„ä¸€ç‚¹æ˜¯ï¼Œå‰åºéå†åºåˆ—ä¸­çš„ç¬¬ä¸€ä¸ªå€¼æ˜¯æ ¹ç»“ç‚¹çš„å€¼ã€‚è™½ç„¶ä¸çŸ¥é“å³å­æ ‘ä»€ä¹ˆæ—¶å€™å¼€å§‹ï¼Œå¦‚æœå·¦å­æ ‘åˆ›å»ºæ­£ç¡®çš„è¯ï¼Œé‚£ä¹ˆå‰©ä½™çš„å…ƒç´ å…¨éƒ¨æ˜¯å±äºå³å­æ ‘çš„ã€‚</p>
<p>ä¸ºäº†çŸ¥é“å½“å‰åœ¨æ„å»ºå“ªä¸€ä¸ªç»“ç‚¹ä»¥åŠå³å­æ ‘ä»ä»€ä¹ˆæ—¶å€™å¼€å§‹ï¼Œä½¿ç”¨subtree_pointer_idxè®°å½•å½“å‰çš„ç»“ç‚¹ã€‚</p>
<p>æ€»ä½“çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(n)ã€‚</p>
<p>å¦å¤–è¿™é‡Œä½¿ç”¨äº†<code>move</code>å‡½æ•°</p>
<blockquote>
<p>std::move åªæ˜¯å°†å‚æ•°è½¬æ¢ä¸ºå³å€¼å¼•ç”¨è€Œå·²ï¼ˆç›¸å½“äºä¸€ä¸ª static_castï¼‰</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">BinaryTreeNode</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">ReconstructPreorderHelper</span><span class="p">(</span>
<span class="w">        </span><span class="k">const</span><span class="w"> </span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">*&gt;</span><span class="w"> </span><span class="o">&amp;</span><span class="n">preorder</span><span class="p">,</span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">subtree_pointer</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="o">&amp;</span><span class="n">subtree_pointer_idx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">*</span><span class="n">subtree_pointer</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">p_node</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">preorder</span><span class="p">[</span><span class="n">subtree_pointer_idx</span><span class="p">];</span>
<span class="w">    </span><span class="o">++</span><span class="n">subtree_pointer_idx</span><span class="p">;</span>
<span class="w">    </span><span class="c1">// å½“å‰ä¸ºç©ºç»“ç‚¹ï¼Œè¿”å›</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">p_node</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="k">nullptr</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">nullptr</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="c1">// åˆ†åˆ«æ„å»ºå·¦å³å­æ ‘</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">left</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ReconstructPreorderHelper</span><span class="p">(</span><span class="n">preorder</span><span class="p">,</span><span class="w"> </span><span class="n">subtree_pointer</span><span class="p">);</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">right</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ReconstructPreorderHelper</span><span class="p">(</span><span class="n">preorder</span><span class="p">,</span><span class="w"> </span><span class="n">subtree_pointer</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">BinaryTreeNode</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span><span class="p">(</span><span class="n">BinaryTreeNode</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">{</span>
<span class="w">            </span><span class="o">*</span><span class="n">p_node</span><span class="p">,</span>
<span class="w">            </span><span class="n">move</span><span class="p">(</span><span class="n">left</span><span class="p">),</span>
<span class="w">            </span><span class="n">move</span><span class="p">(</span><span class="n">right</span><span class="p">)</span>
<span class="w">    </span><span class="p">});</span>
<span class="p">}</span>
<span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">BinaryTreeNode</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">ReconstructPreorder</span><span class="p">(</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">*&gt;&amp;</span><span class="w"> </span><span class="n">preorder</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// TODO - you fill in here.</span>
<span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">subtree_pointer_idx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">ReconstructPreorderHelper</span><span class="p">(</span><span class="n">preorder</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">subtree_pointer_idx</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<h3>Compute the leaves of a binary tree</h3>
<p>è®¿é—®äºŒå‰æ ‘çš„æ‰€æœ‰å¶å­ç»“ç‚¹ï¼Œä»å·¦åˆ°å³çš„é¡ºåºæ’åˆ—</p>
<div class="highlight"><pre><span></span><code><span class="kt">void</span><span class="w"> </span><span class="nf">CreateListOfLeavesHelper</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">BinaryTreeNode</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;&amp;</span><span class="w"> </span><span class="n">tree</span><span class="p">,</span>
<span class="w">                              </span><span class="n">vector</span><span class="o">&lt;</span><span class="k">const</span><span class="w"> </span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">BinaryTreeNode</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;*&gt;</span><span class="w"> </span><span class="o">&amp;</span><span class="n">ret</span><span class="p">){</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">tree</span><span class="p">.</span><span class="n">get</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">tree</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">.</span><span class="n">get</span><span class="p">()</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="o">!</span><span class="n">tree</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">.</span><span class="n">get</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">ret</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="o">&amp;</span><span class="n">tree</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">CreateListOfLeavesHelper</span><span class="p">(</span><span class="n">tree</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">,</span><span class="w"> </span><span class="n">ret</span><span class="p">);</span>
<span class="w">    </span><span class="n">CreateListOfLeavesHelper</span><span class="p">(</span><span class="n">tree</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">,</span><span class="w"> </span><span class="n">ret</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">vector</span><span class="o">&lt;</span><span class="k">const</span><span class="w"> </span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">BinaryTreeNode</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;*&gt;</span><span class="w"> </span><span class="n">CreateListOfLeaves</span><span class="p">(</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">BinaryTreeNode</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;&amp;</span><span class="w"> </span><span class="n">tree</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// TODO - you fill in here.</span>
<span class="w">    </span><span class="n">vector</span><span class="o">&lt;</span><span class="k">const</span><span class="w"> </span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">BinaryTreeNode</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;*&gt;</span><span class="w"> </span><span class="n">ret</span><span class="p">;</span>
<span class="w">    </span><span class="n">CreateListOfLeavesHelper</span><span class="p">(</span><span class="n">tree</span><span class="p">,</span><span class="w"> </span><span class="n">ret</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">ret</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<h3>Compute the exterior of a binary tree</h3>
<p>exteriorå®šä¹‰ï¼šä»æ ¹ç»“ç‚¹åˆ°æœ€å·¦çš„å¶ç»“ç‚¹ï¼Œä»å·¦åˆ°å³æ‰€æœ‰çš„å¶ç»“ç‚¹ï¼Œæœ€å³çš„å¶ç»“ç‚¹å†åˆ°æ ¹ç»“ç‚¹ã€‚</p>
<p>ç›´æ¥çš„æƒ³æ³•å°±æ˜¯ï¼Œå…ˆä»æ ¹ç»“ç‚¹è®¿é—®åˆ°æœ€å·¦ä¸‹ï¼Œå†ä¾æ¬¡è®¿é—®å¶ç»“ç‚¹ï¼Œå†ä»æ ¹ç»“ç‚¹è®¿é—®åˆ°æœ€å³ç»“ç‚¹ï¼Œæœ€åå°†3æ¡è·¯å¾„çš„ç»“æœæ‹¼æ¥èµ·æ¥ã€‚</p>
<p>è¿™æ ·ä¼šå­˜åœ¨è¾¹è§’ç»“ç‚¹å¤šæ¬¡è®¿é—®çš„é—®é¢˜ã€‚</p>
<p>å°†è¿™æ ·ä¸€ä¸ªé—®é¢˜åˆ†è§£æˆåœ¨å·¦å³å­æ ‘ä¸Šçš„éå†ï¼Œå†å°†ç»“æœæ‹¼åœ¨ä¸€èµ·ã€‚</p>
<p>åœ¨å·¦å­æ ‘ä¸­ï¼Œè¾¹è®¿é—®æ•°æ®åŸŸè¾¹å‘ä¸‹å‰è¿›ã€‚è€Œåœ¨å³å­æ ‘ä¸­ï¼Œéœ€è¦å…ˆåˆ°è¾¾æœ€åº•å±‚çš„ç»“ç‚¹æ‰èƒ½ç»§ç»­è®¿é—®æ•°æ®åŸŸã€‚ è¿™æ ·æ‰èƒ½ä¿è¯é¢˜ç›®ä¸­è¦æ±‚çš„è®¿é—®é¡ºåºã€‚</p>
<div class="highlight"><pre><span></span><code><span class="kt">bool</span><span class="w"> </span><span class="nf">IsLeaf</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">BinaryTreeNode</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;&amp;</span><span class="w"> </span><span class="n">tree</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">tree</span><span class="o">-&gt;</span><span class="n">left</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="k">nullptr</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">tree</span><span class="o">-&gt;</span><span class="n">right</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="k">nullptr</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">vector</span><span class="o">&lt;</span><span class="k">const</span><span class="w"> </span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">BinaryTreeNode</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;*&gt;</span><span class="w"> </span><span class="n">LeftBoundaryLeaf</span><span class="p">(</span>
<span class="w">        </span><span class="k">const</span><span class="w"> </span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">BinaryTreeNode</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;&amp;</span><span class="w"> </span><span class="n">tree</span><span class="p">,</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="n">is_boundary</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">vector</span><span class="o">&lt;</span><span class="k">const</span><span class="w"> </span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">BinaryTreeNode</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;*&gt;</span><span class="w"> </span><span class="n">ret</span><span class="p">;</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">tree</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="p">{};</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">is_boundary</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">IsLeaf</span><span class="p">(</span><span class="n">tree</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">ret</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="o">&amp;</span><span class="n">tree</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="c1">// å‘å·¦ä¸€ç›´æ˜¯ä¿æŒboundary</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">left_part</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LeftBoundaryLeaf</span><span class="p">(</span><span class="n">tree</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">,</span><span class="w"> </span><span class="n">is_boundary</span><span class="p">);</span>
<span class="w">    </span><span class="n">ret</span><span class="p">.</span><span class="n">reserve</span><span class="p">(</span><span class="n">ret</span><span class="p">.</span><span class="n">size</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">left_part</span><span class="p">.</span><span class="n">size</span><span class="p">());</span>
<span class="w">    </span><span class="n">ret</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">ret</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span><span class="w"> </span><span class="n">left_part</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span><span class="w"> </span><span class="n">left_part</span><span class="p">.</span><span class="n">end</span><span class="p">());</span>
<span class="w">    </span><span class="c1">// å‘å³çš„æƒ…å†µä¸‹ï¼Œå¦‚æœä¸€ä¸ªç»“ç‚¹æ²¡æœ‰å·¦å­æ ‘ï¼Œè¯¥ç»“ç‚¹ä»ç„¶æ˜¯boundary çš„ä¸€éƒ¨åˆ†</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">right_part</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LeftBoundaryLeaf</span><span class="p">(</span><span class="n">tree</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">,</span><span class="w"> </span><span class="n">is_boundary</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">tree</span><span class="o">-&gt;</span><span class="n">left</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="k">nullptr</span><span class="p">);</span>
<span class="w">    </span><span class="n">ret</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">ret</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span><span class="w"> </span><span class="n">right_part</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span><span class="w"> </span><span class="n">right_part</span><span class="p">.</span><span class="n">end</span><span class="p">());</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">ret</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">vector</span><span class="o">&lt;</span><span class="k">const</span><span class="w"> </span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">BinaryTreeNode</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;*&gt;</span><span class="w"> </span><span class="n">RightBoundaryLeaf</span><span class="p">(</span>
<span class="w">        </span><span class="k">const</span><span class="w"> </span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">BinaryTreeNode</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;&amp;</span><span class="w"> </span><span class="n">tree</span><span class="p">,</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="n">is_boundary</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">tree</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="p">{};</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">vector</span><span class="o">&lt;</span><span class="k">const</span><span class="w"> </span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">BinaryTreeNode</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;*&gt;</span><span class="w"> </span><span class="n">ret</span><span class="p">;</span>
<span class="w">    </span><span class="c1">// å‘å·¦çš„æƒ…å†µä¸‹ï¼Œå¦‚æœä¸Šä¸€ä¸ªç»“ç‚¹æ˜¯boundary å½“å‰ç»“ç‚¹æ²¡æœ‰å·¦å­æ ‘ï¼Œè¯¥ç»“ç‚¹ä»ç„¶æ˜¯boundary çš„ä¸€éƒ¨åˆ†</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">left_part</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">RightBoundaryLeaf</span><span class="p">(</span><span class="n">tree</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">,</span><span class="w"> </span><span class="n">is_boundary</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">tree</span><span class="o">-&gt;</span><span class="n">right</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="k">nullptr</span><span class="p">);</span>
<span class="w">    </span><span class="n">ret</span><span class="p">.</span><span class="n">reserve</span><span class="p">(</span><span class="n">ret</span><span class="p">.</span><span class="n">size</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">left_part</span><span class="p">.</span><span class="n">size</span><span class="p">());</span>
<span class="w">    </span><span class="n">ret</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">ret</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span><span class="w"> </span><span class="n">left_part</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span><span class="w"> </span><span class="n">left_part</span><span class="p">.</span><span class="n">end</span><span class="p">());</span>

<span class="w">    </span><span class="c1">// å‘å·¦ä¸€ç›´æ˜¯ä¿æŒboundary</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">right_part</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">RightBoundaryLeaf</span><span class="p">(</span><span class="n">tree</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">,</span><span class="w"> </span><span class="n">is_boundary</span><span class="p">);</span>
<span class="w">    </span><span class="n">ret</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">ret</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span><span class="w"> </span><span class="n">right_part</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span><span class="w"> </span><span class="n">right_part</span><span class="p">.</span><span class="n">end</span><span class="p">());</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">is_boundary</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">IsLeaf</span><span class="p">(</span><span class="n">tree</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">ret</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="o">&amp;</span><span class="n">tree</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">ret</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">vector</span><span class="o">&lt;</span><span class="k">const</span><span class="w"> </span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">BinaryTreeNode</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;*&gt;</span><span class="w"> </span><span class="n">ExteriorBinaryTree</span><span class="p">(</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">BinaryTreeNode</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;&amp;</span><span class="w"> </span><span class="n">tree</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// TODO - you fill in here.</span>
<span class="w">  </span><span class="n">vector</span><span class="o">&lt;</span><span class="k">const</span><span class="w"> </span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">BinaryTreeNode</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;*&gt;</span><span class="w"> </span><span class="n">ret</span><span class="p">;</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">tree</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="p">{};</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="n">ret</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="o">&amp;</span><span class="n">tree</span><span class="p">);</span>
<span class="w">  </span><span class="k">auto</span><span class="w"> </span><span class="n">left_part</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LeftBoundaryLeaf</span><span class="p">(</span><span class="n">tree</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">);</span>
<span class="w">  </span><span class="k">auto</span><span class="w"> </span><span class="n">right_part</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">RightBoundaryLeaf</span><span class="p">(</span><span class="n">tree</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">);</span>

<span class="w">  </span><span class="n">ret</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">ret</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span><span class="w"> </span><span class="n">left_part</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span><span class="w"> </span><span class="n">left_part</span><span class="p">.</span><span class="n">end</span><span class="p">());</span>
<span class="w">  </span><span class="n">ret</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">ret</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span><span class="w"> </span><span class="n">right_part</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span><span class="w"> </span><span class="n">right_part</span><span class="p">.</span><span class="n">end</span><span class="p">());</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">ret</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<h3>Compute the right sibling tree</h3>
<p>å‡è®¾ç»“ç‚¹ä¸­è¿˜åŒ…å«ä¸€ä¸ªé¢å¤–çš„åŸŸï¼Œlevel-nextï¼ŒæŒ‡å‘å³å…„å¼Ÿç»“ç‚¹ã€‚</p>
<p>ç»™ä¸€ä¸ªperfect binary treeï¼Œæ‰¾å‡ºæ¯ä¸ªç»“ç‚¹çš„å³å…„å¼Ÿç»“ç‚¹ã€‚</p>
<p>æ—¢ç„¶ç»™å‡ºäº†å®Œç¾äºŒå‰æ ‘ï¼Œç›´æ¥æŒ‰å±‚éå†å°±èƒ½å¾—åˆ°æ¯ä¸ªç»“ç‚¹çš„å…„å¼Ÿç»“ç‚¹ã€‚</p>
<div class="highlight"><pre><span></span><code><span class="kt">void</span><span class="w"> </span><span class="nf">ConstructRightSibling</span><span class="p">(</span><span class="n">BinaryTreeNode</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;*</span><span class="w"> </span><span class="n">tree</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// TODO - you fill in here.</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">tree</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">return</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">BinaryTreeNode</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;*&gt;</span><span class="w"> </span><span class="n">curr_level</span><span class="p">,</span><span class="w"> </span><span class="n">next_level</span><span class="p">;</span>
<span class="w">  </span><span class="n">curr_level</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">tree</span><span class="p">);</span>
<span class="w">  </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">curr_level</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">curr_level</span><span class="p">.</span><span class="n">size</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="n">curr_level</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">next</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">curr_level</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">];</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">      </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">auto</span><span class="w"> </span><span class="n">each</span><span class="o">:</span><span class="w"> </span><span class="n">curr_level</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">each</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">.</span><span class="n">get</span><span class="p">()</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="k">nullptr</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="n">next_level</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">each</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">.</span><span class="n">get</span><span class="p">());</span>
<span class="w">              </span><span class="n">next_level</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">each</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">.</span><span class="n">get</span><span class="p">());</span>
<span class="w">          </span><span class="p">}</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">      </span><span class="n">curr_level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">next_level</span><span class="p">;</span>
<span class="w">      </span><span class="n">next_level</span><span class="p">.</span><span class="n">clear</span><span class="p">();</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="k">return</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<p>ä¸‹é¢æ˜¯EPIç»™å‡ºçš„ç©ºé—´å¤æ‚åº¦ä¸ºO(1)çš„è§£æ³•ï¼Œemmï¼ŒğŸ˜…</p>
<p>å¯¹äºå®Œç¾äºŒå‰æ ‘ä¸­çš„ç»“ç‚¹ï¼Œå¯ä»¥åˆ†ä¸ºä¸¤ç§æƒ…å†µ</p>
<ul>
<li>è‹¥æ˜¯å·¦å­©å­ï¼Œåˆ™nextä¸ºçˆ¶ç»“ç‚¹çš„å³å­©å­</li>
<li>è‹¥æ˜¯å³å­©å­ï¼Œåˆ™nextä¸ºçˆ¶ç»“ç‚¹nextçš„å·¦å­©å­</li>
</ul>
<p>æ ¹æ®è¿™ä¸ªç‰¹æ€§ï¼Œåªè¦æŒ‰å±‚å»è®¿é—®å³å¯ã€‚(å› ä¸ºä¸€èµ·çš„äºŒå‰æ ‘å¹¶ä¸ä¼šæœ‰nextåŸŸï¼Œåˆ©ç”¨nextåŸŸå¯ä»¥å¿«é€Ÿåœ°æŒ‰å±‚è®¿é—®)ã€‚</p>
<div class="highlight"><pre><span></span><code><span class="kt">void</span><span class="w"> </span><span class="nf">SetRightSibling</span><span class="p">(</span><span class="n">BinaryTreeNode</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;*</span><span class="w"> </span><span class="n">iter</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// ä¼ å…¥çš„æ˜¯æœ€å·¦ä¾§çš„ç»“ç‚¹</span>
<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">iter</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">iter</span><span class="o">-&gt;</span><span class="n">left</span><span class="o">-&gt;</span><span class="n">next</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iter</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">.</span><span class="n">get</span><span class="p">();</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">iter</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">iter</span><span class="o">-&gt;</span><span class="n">right</span><span class="o">-&gt;</span><span class="n">next</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iter</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">.</span><span class="n">get</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="n">iter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iter</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">ConstructRightSibling</span><span class="p">(</span><span class="n">BinaryTreeNode</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;*</span><span class="w"> </span><span class="n">tree</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// TODO - you fill in here.</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">left_start</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tree</span><span class="p">;</span><span class="w"> </span><span class="c1">// æ²¿ç€å·¦ä¾§å‘ä¸‹</span>
<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">left_start</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">left_start</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">.</span><span class="n">get</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">SetRightSibling</span><span class="p">(</span><span class="n">left_start</span><span class="p">);</span>
<span class="w">        </span><span class="n">left_start</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">left_start</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">.</span><span class="n">get</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
    </div><!-- /.entry-content -->


  </article>


</section>

<div id="comments">
  <h2 style="margin-top: 0.1rem;">Comments !</h2>
  <div id="gitalk-container"></div>
</div>
<script>
  var gitalk = new Gitalk({
    clientID: '4dfbf5aad180623dc634',
    clientSecret: '4c7167883746062103d9dbc2ec8b1ddfd6780d58',
    repo: 'steermomo.github.io',
    owner: 'steermomo',
    admin: ['steermomo'],
    id: location.pathname,      // Ensure uniqueness and length less than 50
    distractionFreeMode: false,  // Facebook-like distraction free mode
    createIssueManually: true,
  })
  gitalk.render('gitalk-container')
</script>
        <section id="extras" class="body">
        </section><!-- /#extras -->
<footer id="contentinfo" class="body">
  <address id="about" class="vcard body">
    Copyright Â© 2024
    </br>
    Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a
      href="http://python.org">Python</a>.
  </address>

  <!-- /#about -->


</footer><!-- /#contentinfo -->



</body>

</html>