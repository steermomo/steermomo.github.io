<!DOCTYPE html>
<html lang="en">

<head>
        <meta name="google-site-verification" content="d0pvXqLPH8JyCfWVyhZ7njhGUndRFIR95YM3myMb7rU" />
        <meta charset="utf-8" />
        <meta http-equiv="Cache-Control" content="no-transform" />
        <meta http-equiv="Cache-Control" content="no-siteapp" />
        <meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=yes" />
        <title>EPI-Heaps</title>
        <link rel="stylesheet" href="/theme/css/main.css" />

        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
        <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>


        <link rel="stylesheet" href="//unpkg.com/heti/umd/heti.min.css">

</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <!-- <h1><a href="/">steer </a></h1> -->
                <nav>
                        <ul>
                                <li><a href="/">ğŸ¦‰</a></li>
                                <li><a href="/blog">Blog</a></li>
                                <li><a href="/archives">Archives</a></li>
                                <li><a href="/gallery">Gallery</a></li>
                                <li id="navName">steer </li>
                        </ul>
                </nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/blog/2020/04/epi-Heaps" rel="bookmark" title="Permalink to EPI-Heaps">EPI-Heaps</a>
      </h1>
    </header>

    <div class="entry-content">
<div class="post-meta">
        Date: <span >
               2020-04-07 Tue
        </span>
<span>Category: <a href="/category/leetcode/">LeetCode</a></span>
<!-- <p>tags: <a href="/tags/epi/">EPI</a> <a href="/tags/cpp/">cpp</a> </p> -->

</div><!-- /.post-info -->

      <p>å¾ˆä¹…å¾ˆä¹…ä»¥å‰ï¼Œæœ‰äººåˆ·é¢˜ä¸åšè®°å½•ï¼Œæ²¡åˆ·è¿‡Heapsã€‚</p>
<p><img src="/images/what.jfif" style="max-width: 80%"></p>
<p>è¿™é‡Œè®°å½•ä¸€ä¸‹åš<strong>Elements of Programming Interviews</strong>çš„é¢˜ç›®ï¼Œé¿å…å››å¹´ä¹‹åè¿˜æ²¡åˆ·è¿‡Heapsã€‚</p>
<p>[TOC]</p>
<h2>Heaps</h2>
<p>Heapsåˆå¯ä»¥ç§°ä¸ºä¼˜å…ˆé˜Ÿåˆ—ï¼Œæ˜¯ä¸€ä¸ªç‰¹åŒ–çš„äºŒå‰æ ‘(å®Œå…¨äºŒå‰æ ‘)ã€‚</p>
<p>Heapä¸­ä¸€ä¸ªç»“ç‚¹çš„é”®å€¼éœ€è¦å¤§äºç­‰äºå…¶å­æ ‘ä¸­çš„é”®å€¼ã€‚</p>
<p>ä¸€ä¸ªæœ€å¤§å †æ’å…¥æ—¶é—´å¤æ‚åº¦ä¸º $O(\log n)$ï¼ŒæŸ¥æ‰¾æœ€å¤§å€¼ä¸º$O(1)$, åˆ é™¤æœ€å¤§å€¼ä¸º$O(\log n)$.</p>
<h3>Tips</h3>
<ul>
<li>å½“éœ€è¦æ“å¿ƒæœ€å¤§å€¼,æœ€å°å€¼ä¸”ä¸éœ€è¦å¿«é€ŸæŸ¥æ‰¾åˆ é™¤æ—¶,ä½¿ç”¨heap</li>
<li>å½“éœ€è¦æŸ¥æ‰¾kä¸ªæœ€å¤§(æœ€å°)å…ƒç´ æ—¶, å¯ä»¥ä½¿ç”¨æœ€å°(æœ€å¤§)å †.</li>
</ul>
<h3>Heap libraries</h3>
<blockquote>
<p>A priority queue is a container adaptor that provides constant time lookup of the largest (by default) element, at the expense of logarithmic insertion and extraction.</p>
<p>A user-provided <code>Compare</code> can be supplied to change the ordering, e.g. using std::greater<T> would cause the smallest element to appear as the <a href="dfile:///Users/steer/Library/Application Support/Dash/DocSets/C++/C++.docset/Contents/Resources/Documents/en.cppreference.com/w/cpp/container/priority_queue/top.html">top()</a>.</p>
<p>Working with a <code>priority_queue</code> is similar to managing a <a href="dfile:///Users/steer/Library/Application Support/Dash/DocSets/C++/C++.docset/Contents/Resources/Documents/en.cppreference.com/w/cpp/algorithm/make_heap.html">heap</a> in some random access container, with the benefit of not being able to accidentally invalidate the heap.</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="c1">// priority_queue</span>
<span class="c1">//std::priority_queue</span>
<span class="c1">// å®šä¹‰</span>
<span class="k">template</span><span class="o">&lt;</span>
<span class="w">    </span><span class="k">class</span><span class="w"> </span><span class="nc">T</span><span class="p">,</span><span class="w"> </span><span class="c1">// æ•°æ®ç±»å‹</span>
<span class="w">    </span><span class="k">class</span><span class="w"> </span><span class="nc">Container</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="c1">//priority_queue å®¹å™¨</span>
<span class="w">    </span><span class="k">class</span><span class="w"> </span><span class="nc">Compare</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">less</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Container</span><span class="o">::</span><span class="n">value_type</span><span class="o">&gt;</span><span class="w"> </span><span class="c1">// æ¯”è¾ƒç¬¦</span>
<span class="o">&gt;</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">priority_queue</span><span class="p">;</span>
<span class="p">.</span><span class="n">push</span><span class="p">();</span>
<span class="p">.</span><span class="n">top</span><span class="p">();</span>
<span class="p">.</span><span class="n">pop</span><span class="p">();</span>
</code></pre></div>

<h3>Merge sorted files</h3>
<p>é—®é¢˜åœºæ™¯ï¼šæœ‰500ä¸ªæ–‡ä»¶ï¼Œæ¯ä¸ªæ–‡ä»¶åŒ…å«ä¸€ä¸ªå…¬å¸çš„è‚¡ç¥¨äº¤æ˜“ä¿¡æ¯ï¼Œæ¯æ¬¡äº¤æ˜“ç¼–ç æˆä¸€è¡Œï¼š123211ï¼ŒAPPLï¼Œ30ï¼Œ456.12ï¼Œåˆ†åˆ«è¡¨ç¤ºè‡ªä»äº¤æ˜“æ—¥è‡³ä»Šçš„æ—¶é—´ã€è‚¡ç¥¨ä»£ç ã€è‚¡ç¥¨çš„è‚¡æ•°(shares)ã€å•ä»·ã€‚</p>
<p>è¦å»å°†è¿™500ä¸ªæ–‡ä»¶åˆå¹¶æˆå•ä¸ªæ–‡ä»¶ï¼ŒæŒ‰ç…§æ—¶é—´å¢åºæ’åˆ—ã€‚</p>
<p>è¿™ä¸ªæœ‰äº›ç±»ä¼¼æœ‰åºåˆ—è¡¨çš„åˆå¹¶, æ¯æ¬¡å–æ¯ä¸ª500ä¸ªæ–‡ä»¶å¤´ä¸­æœ€å°çš„é‚£ä¸ªæ’å…¥åˆ°ç»“æœä¸­. åªæ˜¯è¦åŒæ—¶ç»´æŠ¤500ä¸ªæ–‡ä»¶çš„å½“å‰ä½ç½®æœ‰äº›å›°éš¾.</p>
<p>è¿™é‡Œå°±ç›´æ¥çœ‹EPIçš„è§£æäº†. ç»™å‡ºçš„ä»£ç å®ç°æŒºå¥½çš„, åœ¨å †å†…ä¿å­˜vectorçš„è¿­ä»£å™¨, å°†æ¯”è¾ƒæ“ä½œå®šä¹‰ä¸ºè¿­ä»£å™¨æŒ‡å‘çš„å€¼ä¹‹é—´çš„å¤§å°æ¯”è¾ƒ.</p>
<p>è¿™æ ·æ¯ä¸ªvectoréƒ½æœ‰å¯¹åº”çš„iteratorè®°å½•å½“å‰è¯»å–çš„ä½ç½®. heapçš„æ’åºç‰¹æ€§ä¼šè‡ªåŠ¨å°†å½“å‰æœ€å°å€¼å¯¹åº”çš„iteratorè°ƒæ•´åˆ°å †é¦–.</p>
<p>æ—¶é—´å¤æ‚åº¦ä¸º$O(n\log k)$</p>
<div class="highlight"><pre><span></span><code><span class="k">struct</span><span class="w"> </span><span class="nc">IteratorCurrentAndEnd</span><span class="p">{</span>
<span class="w">    </span><span class="c1">// æ¯”è¾ƒè¿­ä»£å™¨æŒ‡å‘çš„å€¼</span>
<span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="k">operator</span><span class="o">&gt;</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">IteratorCurrentAndEnd</span><span class="o">&amp;</span><span class="w"> </span><span class="n">that</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="o">*</span><span class="n">current</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="o">*</span><span class="n">that</span><span class="p">.</span><span class="n">current</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;::</span><span class="n">const_iterator</span><span class="w"> </span><span class="n">current</span><span class="p">;</span>
<span class="w">    </span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;::</span><span class="n">const_iterator</span><span class="w"> </span><span class="n">end</span><span class="p">;</span>
<span class="p">};</span>
<span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">MergeSortedArrays</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;&amp;</span><span class="w"> </span><span class="n">sorted_arrays</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// TODO - you fill in here.</span>
<span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">priority_queue</span><span class="o">&lt;</span><span class="n">IteratorCurrentAndEnd</span><span class="p">,</span><span class="w"> </span><span class="n">vector</span><span class="o">&lt;</span><span class="n">IteratorCurrentAndEnd</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">greater</span><span class="o">&lt;&gt;&gt;</span>
<span class="w">  </span><span class="n">min_heap</span><span class="p">;</span>
<span class="w">  </span><span class="c1">// ä¿å­˜æ¯ä¸ªæ•°ç»„çš„è¿­ä»£å™¨</span>
<span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span><span class="w"> </span><span class="n">sorted_array</span><span class="o">:</span><span class="w"> </span><span class="n">sorted_arrays</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">sorted_array</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="n">min_heap</span><span class="p">.</span><span class="n">emplace</span><span class="p">(</span><span class="n">IteratorCurrentAndEnd</span><span class="p">{</span><span class="n">sorted_array</span><span class="p">.</span><span class="n">cbegin</span><span class="p">(),</span><span class="w"> </span><span class="n">sorted_array</span><span class="p">.</span><span class="n">cend</span><span class="p">()});</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">ret</span><span class="p">;</span>
<span class="w">  </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">min_heap</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="c1">// å–å‡ºå½“å‰æœ€å°å…ƒç´ å¯¹åº”çš„è¿­ä»£å™¨</span>
<span class="w">      </span><span class="k">auto</span><span class="w"> </span><span class="n">smallest_array</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">min_heap</span><span class="p">.</span><span class="n">top</span><span class="p">();</span>
<span class="w">      </span><span class="n">min_heap</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">smallest_array</span><span class="p">.</span><span class="n">current</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">smallest_array</span><span class="p">.</span><span class="n">end</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="c1">// å¯¹åº”çš„æ•°ç»„éç©º</span>
<span class="w">          </span><span class="n">ret</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="o">*</span><span class="n">smallest_array</span><span class="p">.</span><span class="n">current</span><span class="p">);</span>
<span class="w">          </span><span class="n">min_heap</span><span class="p">.</span><span class="n">emplace</span><span class="p">(</span><span class="n">IteratorCurrentAndEnd</span><span class="p">{</span><span class="n">std</span><span class="o">::</span><span class="n">next</span><span class="p">(</span><span class="n">smallest_array</span><span class="p">.</span><span class="n">current</span><span class="p">),</span><span class="w"> </span><span class="n">smallest_array</span><span class="p">.</span><span class="n">end</span><span class="p">});</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">ret</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<h3>Sort an increasing-decreasing array</h3>
<p>k increasing-decreasing array: æ•°ç»„ä¸­çš„å…ƒç´ é€’å¢é€’å‡å†é€’å¢...å…±kæ¬¡</p>
<p>ç›´æ¥æ’åºçš„æ–¹æ³•æ—¶é—´å¤æ‚åº¦ä¸º$O(n \log n)$. è¿™æ ·å°±æ²¡æœ‰åˆ©ç”¨åˆ°å…ƒç´ æœ‰é€’å¢é€’å‡çš„ç‰¹æ€§.</p>
<p>è‡³äºæ€ä¹ˆç”¨åˆ°è¿™ä¸ªç‰¹æ€§å‘¢...æˆ‘ä¹Ÿä¸çŸ¥é“, æ²¡åšè¿‡</p>
<p>Solution: å…ˆå°†é€’å‡çš„åºåˆ—ç¿»è½¬, ä¹Ÿå˜æˆé€’å¢çš„åºåˆ—. è¿™æ ·å°±å¾—åˆ°äº†ä¸€ç»„éƒ½é€’å¢çš„å­æ•°ç»„, ç„¶åå°±ç±»ä¼¼ä¸Šä¸€é¢˜çš„æ“ä½œ.</p>
<div class="highlight"><pre><span></span><code><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">SortKIncreasingDecreasingArray</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span><span class="w"> </span><span class="n">A</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// TODO - you fill in here.</span>
<span class="w">  </span><span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">sorted_subarrays</span><span class="p">;</span>
<span class="w">  </span><span class="k">typedef</span><span class="w"> </span><span class="k">enum</span><span class="w"> </span><span class="p">{</span><span class="n">INCREASING</span><span class="p">,</span><span class="w"> </span><span class="n">DECREASING</span><span class="p">}</span><span class="w"> </span><span class="n">SubarrayType</span><span class="p">;</span>
<span class="w">  </span><span class="n">SubarrayType</span><span class="w"> </span><span class="n">subarray_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">INCREASING</span><span class="p">;</span>
<span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">start_idx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">A</span><span class="p">.</span><span class="n">size</span><span class="p">();</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="c1">// çŠ¶æ€å‘ç”Ÿå˜åŒ–æˆ–åˆ°è¾¾å°¾éƒ¨</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">A</span><span class="p">.</span><span class="n">size</span><span class="p">()</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="p">(</span><span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="mi">-1</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">subarray_type</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">DECREASING</span><span class="p">)</span>
<span class="w">        </span><span class="o">||</span><span class="w"> </span><span class="p">(</span><span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="mi">-1</span><span class="p">]</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">subarray_type</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">INCREASING</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">subarray_type</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">INCREASING</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="c1">// é€’å¢çš„åºåˆ—ç›´æ¥æ·»åŠ è¿›ret</span>
<span class="w">              </span><span class="n">sorted_subarrays</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">A</span><span class="p">.</span><span class="n">cbegin</span><span class="p">()</span><span class="o">+</span><span class="n">start_idx</span><span class="p">,</span><span class="w"> </span><span class="n">A</span><span class="p">.</span><span class="n">cbegin</span><span class="p">()</span><span class="o">+</span><span class="n">i</span><span class="p">);</span>
<span class="w">          </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="c1">// å°†é€’å‡çš„åºåˆ—ç¿»è½¬åå†æ·»åŠ åˆ°ret</span>
<span class="w">              </span><span class="n">sorted_subarrays</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">A</span><span class="p">.</span><span class="n">crbegin</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">A</span><span class="p">.</span><span class="n">size</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">A</span><span class="p">.</span><span class="n">crbegin</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">A</span><span class="p">.</span><span class="n">size</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">start_idx</span><span class="p">);</span>
<span class="w">          </span><span class="p">}</span>
<span class="w">          </span><span class="n">subarray_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">subarray_type</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">INCREASING</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">DECREASING</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">INCREASING</span><span class="p">;</span>
<span class="w">          </span><span class="n">start_idx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">i</span><span class="p">;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">MergeSortedArrays</span><span class="p">(</span><span class="n">sorted_subarrays</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<h3>Sort an almost-sorted array</h3>
<p>é—®é¢˜èƒŒæ™¯: ç”±äºå»¶æ—¶ç­‰åŸå› ,æœåŠ¡å™¨æŒ‰æ—¶é—´æ¥æ”¶çš„æ•°æ®åœ¨é¡ºåºä¸Šå¯èƒ½ä¼šæœ‰äº›è®¸çš„æ¼‚ç§». ç»™ä¸€ä¸ªæ•°ç»„,å…¶ä¸­å…ƒç´ è·ç¦»å…¶æ­£ç¡®çš„ä½ç½®è·ç¦»ä¸ä¼šè¶…è¿‡k, å°†å…¶æ’åº.</p>
<p>...</p>
<p>ä¸ä¼š, çœ‹è§£æ</p>
<p>...</p>
<p>è¿™ä¸ªè¦ç”¨åˆ°å…ƒç´ è·ç¦»æ­£ç¡®ä½ç½®çš„è·ç¦»ä¸ä¼šè¶…è¿‡kè¿™ä¸ªç‰¹æ€§. åœ¨ä¸€å…±è¯»å…¥k+1ä¸ªå…ƒç´ çš„æƒ…å†µä¸‹, è¿™ä¸ªé›†åˆä¸­çš„æœ€å°å€¼ä¸€å®šä¹Ÿæ˜¯åç»­å…ƒç´ çš„æœ€å°å€¼. å› æ­¤å°±èƒ½ç¡®å®šè¿™ä¸ªå€¼çš„ä½ç½®.</p>
<p>å› ä¸ºæ¯æ¬¡éƒ½éœ€è¦è¯»å…¥ä¸€ä¸ªæ•°, å¹¶è·å¾—å½“å‰é›†åˆçš„æœ€å°å€¼, è¿™é‡Œéœ€è¦ä½¿ç”¨æœ€å°å †æ¥å®ç°.</p>
<p>æ—¶é—´å¤æ‚åº¦ä¸º$O(n \log k)$, ç©ºé—´å¤æ‚åº¦ä¸º$O(k)$</p>
<div class="highlight"><pre><span></span><code><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">SortApproximatelySortedData</span><span class="p">(</span>
<span class="w">    </span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;::</span><span class="n">const_iterator</span><span class="w"> </span><span class="n">sequence_begin</span><span class="p">,</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;::</span><span class="n">const_iterator</span><span class="o">&amp;</span><span class="w"> </span><span class="n">sequence_end</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">k</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// TODO - you fill in here.</span>
<span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">priority_queue</span><span class="o">&lt;</span><span class="kt">int</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">greater</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">min_heap</span><span class="p">;</span>
<span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">cnt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">  </span><span class="c1">// å…ˆå­˜å…¥k+1ä¸ªæ•°</span>
<span class="w">  </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">sequence_begin</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">sequence_end</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">cnt</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">k</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kt">int</span><span class="w"> </span><span class="n">val</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">*</span><span class="n">sequence_begin</span><span class="p">;</span>
<span class="w">      </span><span class="n">min_heap</span><span class="p">.</span><span class="n">emplace</span><span class="p">(</span><span class="n">val</span><span class="p">);</span>
<span class="w">      </span><span class="o">++</span><span class="n">sequence_begin</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">ret</span><span class="p">;</span>
<span class="w">  </span><span class="c1">// æ¯æ–°è¯»å–ä¸€ä¸ªæ•°ï¼Œ å½“å‰å †çš„æœ€å°å€¼å°±æ˜¯æ­£ç¡®æ’åºçš„æœ€å°å€¼</span>
<span class="w">  </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">sequence_begin</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">sequence_end</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kt">int</span><span class="w"> </span><span class="n">val</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">min_heap</span><span class="p">.</span><span class="n">top</span><span class="p">();</span>
<span class="w">      </span><span class="n">min_heap</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
<span class="w">      </span><span class="n">ret</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">val</span><span class="p">);</span>
<span class="w">      </span><span class="n">min_heap</span><span class="p">.</span><span class="n">emplace</span><span class="p">(</span><span class="o">*</span><span class="n">sequence_begin</span><span class="p">);</span>
<span class="w">      </span><span class="o">++</span><span class="n">sequence_begin</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="c1">// å°†å †ä¸­çš„å‰©ä½™å…ƒç´ è¿½åŠ åˆ°ç»“æœä¸­</span>
<span class="w">  </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">min_heap</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kt">int</span><span class="w"> </span><span class="n">val</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">min_heap</span><span class="p">.</span><span class="n">top</span><span class="p">();</span>
<span class="w">      </span><span class="n">ret</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">val</span><span class="p">);</span>
<span class="w">      </span><span class="n">min_heap</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">ret</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<h3>Compute the k closest stars</h3>
<p>Milky WayéŠ€æ²³ç³»</p>
<p>è®¡ç®—åœ¨é“¶æ²³ç³»ä¸­è·ç¦»åœ°çƒæœ€è¿‘çš„ké¢—æ˜Ÿçƒ.</p>
<p>è¿™ä¸ªè¿˜æ˜¯æ¯”è¾ƒç®€å•çš„, åªæ˜¯éœ€è¦ç”¨æœ€å¤§å †æ¥å¤„ç†.</p>
<div class="highlight"><pre><span></span><code><span class="n">vector</span><span class="o">&lt;</span><span class="n">Star</span><span class="o">&gt;</span><span class="w"> </span><span class="n">FindClosestKStars</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Star</span><span class="o">&gt;::</span><span class="n">const_iterator</span><span class="w"> </span><span class="n">stars_begin</span><span class="p">,</span>
<span class="w">                               </span><span class="k">const</span><span class="w"> </span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Star</span><span class="o">&gt;::</span><span class="n">const_iterator</span><span class="o">&amp;</span><span class="w"> </span><span class="n">stars_end</span><span class="p">,</span>
<span class="w">                               </span><span class="kt">int</span><span class="w"> </span><span class="n">k</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// TODO - you fill in here.</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">priority_queue</span><span class="o">&lt;</span><span class="n">Star</span><span class="p">,</span><span class="w"> </span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Star</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">less</span><span class="o">&lt;&gt;&gt;</span><span class="w"> </span><span class="n">max_heap</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">cnt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">stars_begin</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">stars_end</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">cnt</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">k</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="o">++</span><span class="n">cnt</span><span class="p">;</span>
<span class="w">        </span><span class="n">max_heap</span><span class="p">.</span><span class="n">emplace</span><span class="p">(</span><span class="o">*</span><span class="n">stars_begin</span><span class="p">);</span>
<span class="w">        </span><span class="o">++</span><span class="n">stars_begin</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">stars_begin</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">stars_end</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">max_heap</span><span class="p">.</span><span class="n">emplace</span><span class="p">(</span><span class="o">*</span><span class="n">stars_begin</span><span class="p">);</span>
<span class="w">        </span><span class="n">max_heap</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span><span class="w"> </span><span class="c1">// pop æœ€å¤§å…ƒç´ </span>
<span class="w">        </span><span class="o">++</span><span class="n">stars_begin</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Star</span><span class="o">&gt;</span><span class="w"> </span><span class="n">ret</span><span class="p">;</span>
<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">max_heap</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">ret</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">max_heap</span><span class="p">.</span><span class="n">top</span><span class="p">());</span>
<span class="w">        </span><span class="n">max_heap</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">ret</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<h3>Compute the median of online data</h3>
<p>è®¡ç®—ä¸€ä¸ªæµä¸­å…ƒç´ çš„ä¸­ä½æ•°.</p>
<p>è¿™é‡Œæ˜¯éœ€è¦ä¿å­˜å†å²æ•°æ®çš„, å¦‚æœæ˜¯ç”¨æ•°ç»„é¡ºåºä¿å­˜, æ¯æ¬¡æ’å…¥ä¸€ä¸ªå…ƒç´ éƒ½éœ€è¦æŸ¥æ‰¾ä¸€æ¬¡ä¸­ä½æ•°.</p>
<p>ä¸­ä½æ•°çš„ç‰¹ç‚¹æ˜¯å°†æ•°å€¼é›†åˆåˆ†æˆä¸¤ä¸ªå¤§å°å‡ç­‰çš„éƒ¨åˆ†, é‚£ä¹ˆå°±å¯ä»¥ç”¨ä¸€ä¸ªæœ€å¤§å †å’Œä¸€ä¸ªæœ€å°å †æ¥åˆ†åˆ«è¡¨ç¤ºè¿™ä¸¤ä¸ªéƒ¨åˆ†. æ¯æ¬¡è¯»å–ä¸€ä¸ªæ–°å…ƒç´ , å°±ä¾æ¬¡ä»è¿™ä¸¤ä¸ªå †é‡Œè¿‡ä¸€é.</p>
<div class="highlight"><pre><span></span><code><span class="n">vector</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span><span class="w"> </span><span class="n">OnlineMedian</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;::</span><span class="n">const_iterator</span><span class="w"> </span><span class="n">sequence_begin</span><span class="p">,</span>
<span class="w">                            </span><span class="k">const</span><span class="w"> </span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;::</span><span class="n">const_iterator</span><span class="w"> </span><span class="o">&amp;</span><span class="n">sequence_end</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// TODO - you fill in here.</span>
<span class="w">    </span><span class="c1">// æœ€å°å †å­˜å‚¨è¾ƒå¤§çš„é‚£åŠéƒ¨ä»½æ•°  æœ€å¤§å †å­˜å‚¨è¾ƒå°çš„é‚£éƒ¨ä»½</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">priority_queue</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">greater</span><span class="o">&lt;&gt;&gt;</span><span class="w"> </span><span class="n">min_heap</span><span class="p">;</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">priority_queue</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">less</span><span class="o">&lt;&gt;&gt;</span><span class="w"> </span><span class="n">max_heap</span><span class="p">;</span>
<span class="w">    </span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span><span class="w"> </span><span class="n">ret</span><span class="p">;</span>
<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">sequence_begin</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">sequence_end</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">min_heap</span><span class="p">.</span><span class="n">emplace</span><span class="p">(</span><span class="o">*</span><span class="n">sequence_begin</span><span class="o">++</span><span class="p">);</span>
<span class="w">        </span><span class="n">max_heap</span><span class="p">.</span><span class="n">emplace</span><span class="p">(</span><span class="n">min_heap</span><span class="p">.</span><span class="n">top</span><span class="p">());</span>
<span class="w">        </span><span class="n">min_heap</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
<span class="w">        </span><span class="c1">// å¶æ•°ä¸ªå…ƒç´ æƒ…å†µä¸‹ï¼Œ ä¸¤ä¸ªå †å¤§å°å°†ä¼šç›¸ç­‰ï¼Œ å¦åˆ™æœ€å°å †å°†ä¼šå¤šä¸€ä¸ªå…ƒç´ </span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">max_heap</span><span class="p">.</span><span class="n">size</span><span class="p">()</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">min_heap</span><span class="p">.</span><span class="n">size</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">min_heap</span><span class="p">.</span><span class="n">emplace</span><span class="p">(</span><span class="n">max_heap</span><span class="p">.</span><span class="n">top</span><span class="p">());</span>
<span class="w">            </span><span class="n">max_heap</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="n">ret</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">max_heap</span><span class="p">.</span><span class="n">size</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">min_heap</span><span class="p">.</span><span class="n">size</span><span class="p">()</span><span class="w"> </span><span class="o">?</span>
<span class="w">                         </span><span class="mf">0.5</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">max_heap</span><span class="p">.</span><span class="n">top</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">0.5</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">min_heap</span><span class="p">.</span><span class="n">top</span><span class="p">()</span><span class="w"> </span><span class="o">:</span>
<span class="w">                         </span><span class="n">min_heap</span><span class="p">.</span><span class="n">top</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">ret</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<h3>Compute the k largest elements in a max-heap</h3>
<p>åœ¨ä¸æ”¹å˜å †å­˜å‚¨çš„æƒ…å†µä¸‹è·å–kä¸ªæœ€å¤§çš„å…ƒç´ .</p>
<p>å¦‚æœå¯¹å †è¿›è¡Œæ’åº,åˆ™æ”¹å˜äº†å †å­˜å‚¨.</p>
<p>è¿™é‡Œåˆ©ç”¨æœ€å¤§å †çš„æ€§è´¨: ç»“ç‚¹çš„å€¼å¤§äºç­‰äºæ‰€æœ‰å­æ ‘ä¸­ç»“ç‚¹çš„å€¼, åŒæ—¶å †æ˜¯ä¸€ä¸ªå®Œå…¨äºŒå‰æ ‘, åœ¨æ•°ç»„çš„å­˜å‚¨ç»“æ„ä¸­çˆ¶å­ç»“ç‚¹å¾ˆå®¹æ˜“ç´¢å¼•.</p>
<p>é‚£ä¹ˆæ ¹ç»“ç‚¹åŒ…å«æœ€å¤§çš„å…ƒç´ , ç¬¬äºŒå¤§çš„åˆ™æ˜¯æ ¹ç»“ç‚¹çš„å·¦å³å­©å­ä¸­è¾ƒå¤§è€…, ç¬¬ä¸‰å¤§çš„åˆæ˜¯å‰è¿°å­ç»“ç‚¹çš„å­ç»“ç‚¹ä¸­è¾ƒå¤§è€…. </p>
<p>å¦‚æœæ‰‹å†™åˆ¤æ–­å°†ä¼šååˆ†éº»çƒ¦,  åˆšå¥½åœ¨ä¸Šé¢çš„æ“ä½œä¸­åˆä¸€ç›´æœ‰å–é›†åˆçš„æœ€å¤§å€¼,å¦å¼€ä¸€ä¸ªå †æ¥å®Œæˆå…ƒç´ çš„æ’åˆ—æ¯”è¾ƒæ–¹ä¾¿.</p>
<p>EPIçš„å†™æ³•ä¸­ä½¿ç”¨äº†<code>std::function&lt;bool(HeapEntry, HeapEntry)&gt;</code>æ¥å®Œæˆé˜Ÿåˆ—çš„ç±»å‹æŒ‡å®š. </p>
<p>åœ¨<code>priority_queue</code>çš„å®šä¹‰ä¸­, <code>Compare</code>å¯¹è±¡éœ€è¦æ˜¯ä¸€ä¸ªclass</p>
<div class="highlight"><pre><span></span><code><span class="k">template</span><span class="o">&lt;</span>
<span class="w">    </span><span class="k">class</span><span class="w"> </span><span class="nc">T</span><span class="p">,</span>
<span class="w">    </span><span class="k">class</span><span class="w"> </span><span class="nc">Container</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">,</span>
<span class="w">    </span><span class="k">class</span><span class="w"> </span><span class="nc">Compare</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">less</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Container</span><span class="o">::</span><span class="n">value_type</span><span class="o">&gt;</span>
<span class="o">&gt;</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">priority_queue</span><span class="p">;</span>
</code></pre></div>

<p>ä¸èƒ½ç›´æ¥ä¼ å…¥<code>lambda</code>å‡½æ•°. åœ¨æ¨¡æ¿ä¸­æŒ‡å®šäº†<code>Compare</code>å,  é€šè¿‡æ„é€ å‡½æ•°èµ‹å€¼æ¯”è¾ƒå‡½æ•°</p>
<div class="highlight"><pre><span></span><code><span class="k">explicit</span><span class="w"> </span><span class="n">priority_queue</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Compare</span><span class="o">&amp;</span><span class="w"> </span><span class="n">compare</span><span class="p">)</span><span class="w"> </span>
<span class="w">    </span><span class="o">:</span><span class="w"> </span><span class="n">priority_queue</span><span class="p">(</span><span class="n">compare</span><span class="p">,</span><span class="w"> </span><span class="n">Container</span><span class="p">())</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">KLargestInBinaryHeap</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span><span class="w"> </span><span class="n">A</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">k</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// TODO - you fill in here.</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">k</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="p">{};</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="k">struct</span><span class="w"> </span><span class="nc">HeapEntry</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kt">int</span><span class="w"> </span><span class="n">idx</span><span class="p">,</span><span class="w"> </span><span class="n">val</span><span class="p">;</span>
<span class="w">  </span><span class="p">};</span>
<span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">priority_queue</span><span class="o">&lt;</span><span class="n">HeapEntry</span><span class="p">,</span><span class="w"> </span><span class="n">vector</span><span class="o">&lt;</span><span class="n">HeapEntry</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">function</span><span class="o">&lt;</span><span class="kt">bool</span><span class="p">(</span><span class="n">HeapEntry</span><span class="p">,</span><span class="w"> </span><span class="n">HeapEntry</span><span class="p">)</span><span class="o">&gt;&gt;</span>
<span class="w">    </span><span class="n">candidate_max_heap</span><span class="p">([]</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">HeapEntry</span><span class="o">&amp;</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">HeapEntry</span><span class="o">&amp;</span><span class="w"> </span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="k">return</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="n">val</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">val</span><span class="p">;});</span>
<span class="w">  </span><span class="c1">// æ”¾å…¥æ ¹ç»“ç‚¹</span>
<span class="w">  </span><span class="n">candidate_max_heap</span><span class="p">.</span><span class="n">emplace</span><span class="p">(</span><span class="n">HeapEntry</span><span class="p">{</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">A</span><span class="p">[</span><span class="mi">0</span><span class="p">]});</span>
<span class="w">  </span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">ret</span><span class="p">;</span>
<span class="w">  </span><span class="c1">// å–å‡ºkä¸ªæœ€å¤§çš„æ•°</span>
<span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">k</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kt">int</span><span class="w"> </span><span class="n">candidate_idx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">candidate_max_heap</span><span class="p">.</span><span class="n">top</span><span class="p">().</span><span class="n">idx</span><span class="p">;</span>
<span class="w">      </span><span class="n">ret</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">A</span><span class="p">[</span><span class="n">candidate_idx</span><span class="p">]);</span>
<span class="w">      </span><span class="n">candidate_max_heap</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>

<span class="w">      </span><span class="kt">int</span><span class="w"> </span><span class="n">left_idx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">candidate_idx</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">left_idx</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">A</span><span class="p">.</span><span class="n">size</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="n">candidate_max_heap</span><span class="p">.</span><span class="n">emplace</span><span class="p">(</span><span class="n">HeapEntry</span><span class="p">{</span><span class="n">left_idx</span><span class="p">,</span><span class="w"> </span><span class="n">A</span><span class="p">[</span><span class="n">left_idx</span><span class="p">]});</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">      </span><span class="kt">int</span><span class="w"> </span><span class="n">right_idx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">candidate_idx</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">right_idx</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">A</span><span class="p">.</span><span class="n">size</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="n">candidate_max_heap</span><span class="p">.</span><span class="n">emplace</span><span class="p">(</span><span class="n">HeapEntry</span><span class="p">{</span><span class="n">right_idx</span><span class="p">,</span><span class="w"> </span><span class="n">A</span><span class="p">[</span><span class="n">right_idx</span><span class="p">]});</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">ret</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
    </div><!-- /.entry-content -->


  </article>


</section>

<div id="comments">
  <h2 style="margin-top: 0.1rem;">Comments !</h2>
  <div id="gitalk-container"></div>
</div>
<script>
  var gitalk = new Gitalk({
    clientID: '4dfbf5aad180623dc634',
    clientSecret: '4c7167883746062103d9dbc2ec8b1ddfd6780d58',
    repo: 'steermomo.github.io',
    owner: 'steermomo',
    admin: ['steermomo'],
    id: location.pathname,      // Ensure uniqueness and length less than 50
    distractionFreeMode: false,  // Facebook-like distraction free mode
    createIssueManually: true,
  })
  gitalk.render('gitalk-container')
</script>
        <section id="extras" class="body">
        </section><!-- /#extras -->
<footer id="contentinfo" class="body">
  <address id="about" class="vcard body">
    Copyright Â© 2024
    </br>
    Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a
      href="http://python.org">Python</a>.
  </address>

  <!-- /#about -->


</footer><!-- /#contentinfo -->



</body>

</html>