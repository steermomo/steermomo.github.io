<!DOCTYPE html>
<html lang="en">

<head>
        <meta name="google-site-verification" content="d0pvXqLPH8JyCfWVyhZ7njhGUndRFIR95YM3myMb7rU" />
        <meta charset="utf-8" />
        <meta http-equiv="Cache-Control" content="no-transform" />
        <meta http-equiv="Cache-Control" content="no-siteapp" />
        <meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=yes" />
        <title>Starshipé…ç½®å‘½ä»¤è¡Œæç¤ºç¬¦</title>
        <link rel="stylesheet" href="/theme/css/main.css" />

        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
        <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>


        <link rel="stylesheet" href="//unpkg.com/heti/umd/heti.min.css">

</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <!-- <h1><a href="/">steer </a></h1> -->
                <nav>
                        <ul>
                                <li><a href="/">ğŸ¦‰</a></li>
                                <li><a href="/blog">Blog</a></li>
                                <li><a href="/archives">Archives</a></li>
                                <li><a href="/gallery">Gallery</a></li>
                                <li id="navName">steer </li>
                        </ul>
                </nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/blog/2021/05/startship-shell-prompt-config" rel="bookmark" title="Permalink to Starshipé…ç½®å‘½ä»¤è¡Œæç¤ºç¬¦">Starshipé…ç½®å‘½ä»¤è¡Œæç¤ºç¬¦</a>
      </h1>
    </header>

    <div class="entry-content">
<div class="post-meta">
        Date: <span >
               2021-05-11 Tue
        </span>
<span>Category: <a href="/category/misc/">MISC</a></span>
<!-- <p>tags: <a href="/tags/shell/">Shell</a> </p> -->

</div><!-- /.post-info -->

      <p>æœ€è¿‘å°è¯•äº†ä¸€ä¸‹Starshipï¼Œå…¶å®˜æ–¹å£°ç§°æ˜¯ä¸€ä¸ªCROSS-SHELL PROMPTï¼Œç”¨RUSTå®ç°ï¼Œçœ‹èµ·æ¥è›®é«˜çº§è¿…é€Ÿã€‚
æ•´äº†ä¸€ä¸‹é…ç½®è¿‡ç¨‹ï¼Œå‘ç°ä¸­æ–‡ç½‘ç»œä¸Šå¯¹å…¶çš„é…ç½®è¿‡ç¨‹ä»‹ç»çš„æ¯”è¾ƒå°‘ã€‚</p>
<h2>ç§»é™¤oh-my-zsh</h2>
<p>ä¹‹å‰ä¸€ç›´ç”¨çš„æ˜¯oh-my-zshï¼Œæœ‰äº†æ–°ç©å…·ï¼Œæ—§çš„å…ˆç§»é™¤äº†ã€‚ç›´æ¥åœ¨ç»ˆç«¯ä¸­ä½¿ç”¨ç§»é™¤å‘½ä»¤å³å¯ã€‚</p>
<div class="highlight"><pre><span></span><code>uninstall_oh_my_zsh
</code></pre></div>

<h2>å®‰è£…Starship</h2>
<p>åœ¨è¿™ç¯‡æ–‡ç« å†™ä½œçš„æ—¶å€™ï¼Œbrewä¸­è¿˜æ²¡æœ‰é’ˆå¯¹M1èŠ¯ç‰‡çš„åŒ…ï¼Œå®‰è£…è¿‡ç¨‹ç›´æ¥ä½¿ç”¨äº†shellè„šæœ¬</p>
<div class="highlight"><pre><span></span><code>sh<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;</span><span class="k">$(</span>curl<span class="w"> </span>-fsSL<span class="w"> </span>https://starship.rs/install.sh<span class="k">)</span><span class="s2">&quot;</span>
</code></pre></div>

<h2>å®‰è£…Nerdå­—ä½“</h2>
<p>ä» www.nerdfonts.com ä¸Šä¸‹è½½å­—ä½“ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯Fira Mono Nerd Font
å¹¶åœ¨ç»ˆç«¯ä¸­å¯ç”¨å­—ä½“</p>
<h2>é…ç½®å¯åŠ¨</h2>
<p>åœ¨ ~/.zshrc æ–‡ä»¶çš„æœ€æœ«ç«¯åŠ ä¸Šå¦‚ä¸‹å‘½ä»¤ç”¨äºè‡ªåŠ¨å¯åŠ¨starhipã€‚</p>
<div class="highlight"><pre><span></span><code># ~/.zshrc

eval &quot;$(starship init zsh)&quot;
</code></pre></div>

<h2>ysä¸»é¢˜é…ç½®æ ¼å¼</h2>
<p>åœ¨ä½¿ç”¨starshipä¹‹å‰ï¼Œä¸€ç›´ç”¨çš„æ˜¯oh-my-zshï¼Œysä¸»é¢˜ï¼Œ
<img style="width: 70%;" src="https://user-images.githubusercontent.com/49100982/108255792-be1ede00-716d-11eb-8c26-f7ad7ab3c4f2.jpg">
</img></p>
<p>è€ŒStarshipé»˜è®¤çš„æç¤ºæ ¼å¼ä¹Ÿå¤ªç®€é™‹äº†ï¼Œä¸Šä¸€æ¡çº¿å°±ç»™äº†ç›®å½•ï¼Œä¸‹ä¸€æ¡çº¿ç»™äº†ä¸ªç®­å¤´å®Œäº‹</p>
<div style="margin: auto;">
<video style="width: 70%;display: block;margin: 0 auto;" muted="muted" autoplay="autoplay" loop="loop" playsinline="" class="demo-video"><source src="https://starship.rs/demo.webm" type="video/webm"> <source src="https://starship.rs/demo.mp4" type="video/mp4"></video>
</div>

<p>è¿™é‡Œæƒ³æŠŠå®ƒæ”¹æˆysä¸»é¢˜çš„å½¢å¼ï¼Œysçš„é…ç½®æ–‡ä»¶<sup id="fnref:1"><a class="footnote-ref" href="#fn:1">1</a></sup>ä¸­ç»™å‡ºäº†é…ç½®æ ¼å¼</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Prompt format:</span>
<span class="c1">#</span>
<span class="c1"># PRIVILEGES USER @ MACHINE in DIRECTORY on git:BRANCH STATE [TIME] C:LAST_EXIT_CODE</span>
<span class="c1"># $ COMMAND</span>
<span class="c1">#</span>
<span class="c1"># For example:</span>
<span class="c1">#</span>
<span class="c1"># % ys @ ys-mbp in ~/.oh-my-zsh on git:master x [21:47:42] C:0</span>
<span class="c1"># $</span>
<span class="nv">PROMPT</span><span class="o">=</span><span class="s2">&quot;</span>
<span class="s2">%{</span><span class="nv">$terminfo</span><span class="s2">[bold]</span><span class="nv">$fg</span><span class="s2">[blue]%}#%{</span><span class="nv">$reset_color</span><span class="s2">%} \</span>
<span class="s2">%(#,%{</span><span class="nv">$bg</span><span class="s2">[yellow]%}%{</span><span class="nv">$fg</span><span class="s2">[black]%}%n%{</span><span class="nv">$reset_color</span><span class="s2">%},%{</span><span class="nv">$fg</span><span class="s2">[cyan]%}%n) \</span>
<span class="s2">%{</span><span class="nv">$fg</span><span class="s2">[white]%}@ \</span>
<span class="s2">%{</span><span class="nv">$fg</span><span class="s2">[green]%}%m \</span>
<span class="s2">%{</span><span class="nv">$fg</span><span class="s2">[white]%}in \</span>
<span class="s2">%{</span><span class="nv">$terminfo</span><span class="s2">[bold]</span><span class="nv">$fg</span><span class="s2">[yellow]%}%~%{</span><span class="nv">$reset_color</span><span class="s2">%}\</span>
<span class="si">${</span><span class="nv">hg_info</span><span class="si">}</span><span class="s2">\</span>
<span class="si">${</span><span class="nv">git_info</span><span class="si">}</span><span class="s2">\</span>
<span class="si">${</span><span class="nv">venv_info</span><span class="si">}</span><span class="s2">\</span>
<span class="s2"> \</span>
<span class="s2">%{</span><span class="nv">$fg</span><span class="s2">[white]%}[%*] </span><span class="nv">$exit_code</span>
<span class="s2">%{</span><span class="nv">$terminfo</span><span class="s2">[bold]</span><span class="nv">$fg</span><span class="s2">[red]%}</span>$<span class="s2"> %{</span><span class="nv">$reset_color</span><span class="s2">%}&quot;</span>
</code></pre></div>

<h2>é…ç½®Starship</h2>
<p>åœ¨Starshipä¸­ï¼Œç›´æ¥ä½¿ç”¨ starship config å‘½ä»¤å¯ä»¥æ‰“å¼€é…ç½®æ–‡ä»¶ã€‚</p>
<p>é…ç½®è¿‡ç¨‹çœ‹èµ·æ¥æœ‰ç‚¹å¤æ‚ï¼ŒStarshipä¸­å¯¹promptçš„é…ç½®<sup id="fnref:2"><a class="footnote-ref" href="#fn:2">2</a></sup>ç»™å‡ºäº†ä¸€ä¸ªç¤ºä¾‹</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Use custom format</span>
<span class="nv">format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">[â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;](bold green)</span>
<span class="s2">[â”‚](bold green)</span><span class="nv">$directory$rust$package</span>
<span class="s2">[â””â”€&gt;](bold green) &quot;&quot;&quot;</span>
</code></pre></div>

<p>è¿™ä¸ªä¾‹å­çœ‹èµ·æ¥è¿˜è¦æ‰‹å†™formatï¼Œ å…¶ä¸­formatæ‰€æœ‰å¯ç”¨çš„é…ç½®é¡¹ç›®å¦‚ä¸‹</p>
<div class="highlight"><pre><span></span><code><span class="nv">format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$all</span><span class="s2">&quot;</span>

<span class="c1"># Which is equivalent to</span>
<span class="nv">format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;&quot;&quot;</span>
<span class="nv">$username</span><span class="s2">\</span>
<span class="nv">$hostname</span><span class="s2">\</span>
<span class="nv">$shlvl</span><span class="s2">\</span>
<span class="nv">$kubernetes</span><span class="s2">\</span>
<span class="nv">$directory</span><span class="s2">\</span>
<span class="nv">$vcsh</span><span class="s2">\</span>
<span class="nv">$git_branch</span><span class="s2">\</span>
<span class="nv">$git_commit</span><span class="s2">\</span>
<span class="nv">$git_state</span><span class="s2">\</span>
<span class="nv">$git_status</span><span class="s2">\</span>
<span class="nv">$hg_branch</span><span class="s2">\</span>
<span class="nv">$docker_context</span><span class="s2">\</span>
<span class="nv">$package</span><span class="s2">\</span>
<span class="nv">$cmake</span><span class="s2">\</span>
<span class="nv">$dart</span><span class="s2">\</span>
<span class="nv">$deno</span><span class="s2">\</span>
<span class="nv">$dotnet</span><span class="s2">\</span>
<span class="nv">$elixir</span><span class="s2">\</span>
<span class="nv">$elm</span><span class="s2">\</span>
<span class="nv">$erlang</span><span class="s2">\</span>
<span class="nv">$golang</span><span class="s2">\</span>
<span class="nv">$helm</span><span class="s2">\</span>
<span class="nv">$java</span><span class="s2">\</span>
<span class="nv">$julia</span><span class="s2">\</span>
<span class="nv">$kotlin</span><span class="s2">\</span>
<span class="nv">$nim</span><span class="s2">\</span>
<span class="nv">$nodejs</span><span class="s2">\</span>
<span class="nv">$ocaml</span><span class="s2">\</span>
<span class="nv">$perl</span><span class="s2">\</span>
<span class="nv">$php</span><span class="s2">\</span>
<span class="nv">$purescript</span><span class="s2">\</span>
<span class="nv">$python</span><span class="s2">\</span>
<span class="nv">$red</span><span class="s2">\</span>
<span class="nv">$ruby</span><span class="s2">\</span>
<span class="nv">$rust</span><span class="s2">\</span>
<span class="nv">$scala</span><span class="s2">\</span>
<span class="nv">$swift</span><span class="s2">\</span>
<span class="nv">$terraform</span><span class="s2">\</span>
<span class="nv">$vagrant</span><span class="s2">\</span>
<span class="nv">$zig</span><span class="s2">\</span>
<span class="nv">$nix_shell</span><span class="s2">\</span>
<span class="nv">$conda</span><span class="s2">\</span>
<span class="nv">$memory_usage</span><span class="s2">\</span>
<span class="nv">$aws</span><span class="s2">\</span>
<span class="nv">$gcloud</span><span class="s2">\</span>
<span class="nv">$openstack</span><span class="s2">\</span>
<span class="nv">$env_var</span><span class="s2">\</span>
<span class="nv">$crystal</span><span class="s2">\</span>
<span class="nv">$custom</span><span class="s2">\</span>
<span class="nv">$cmd_duration</span><span class="s2">\</span>
<span class="nv">$line_break</span><span class="s2">\</span>
<span class="nv">$lua</span><span class="s2">\</span>
<span class="nv">$jobs</span><span class="s2">\</span>
<span class="nv">$battery</span><span class="s2">\</span>
<span class="nv">$time</span><span class="s2">\</span>
<span class="nv">$status</span><span class="s2">\</span>
<span class="nv">$shell</span><span class="s2">\</span>
<span class="nv">$character</span><span class="s2">&quot;&quot;&quot;</span>
</code></pre></div>

<p>å¯¹æ¯”oh my zshä¸­ysä¸»é¢˜çš„é…ç½®ï¼Œå¤§æ¦‚çš„æ ¼å¼å¦‚ä¸‹</p>
<div class="highlight"><pre><span></span><code>ys<span class="w"> </span>@<span class="w"> </span>ys-mbp<span class="w"> </span><span class="k">in</span><span class="w"> </span>~/.oh-my-zsh<span class="w"> </span>on<span class="w"> </span>git:master<span class="w"> </span>x<span class="w"> </span><span class="o">[</span><span class="m">21</span>:47:42<span class="o">]</span><span class="w"> </span>C:0
ç”¨æˆ·å<span class="w"> </span>@<span class="w"> </span>ä¸»æœºå<span class="w"> </span><span class="k">in</span><span class="w"> </span>è·¯å¾„<span class="w"> </span>on<span class="w"> </span>gitåˆ†æ”¯æç¤º<span class="w"> </span>æ—¶é—´<span class="w"> </span>çŠ¶æ€ç 
</code></pre></div>

<p>å€’è…¾äº†ä¸€å°ä¼šï¼Œå‘ç°ä¸éœ€è¦è‡ªå·±å†æ‰‹åŠ¨å†™é…ç½®æ ¼å¼ï¼Œåœ¨Starshipçš„Configurationéƒ¨åˆ†å·²ç»é¢„ç½®äº†å¾ˆå¤šåœºæ™¯ä¸‹çš„é…ç½®é¡¹ï¼Œ
åªæ˜¯é»˜è®¤æƒ…å†µä¸‹æ²¡æœ‰æ‰“å¼€ã€‚</p>
<p>æ¯”å¦‚éœ€è¦æ·»åŠ Usernameé¡¹ç›®ï¼Œåœ¨starship.tomlæ–‡ä»¶å†…æ·»åŠ </p>
<div class="highlight"><pre><span></span><code><span class="k">[username]</span>
<span class="na">disabled</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">false</span>
<span class="na">show_always</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">true</span>
</code></pre></div>

<p>å°±èƒ½åœ¨æç¤ºç¬¦ä¸­æ˜¾ç¤ºUsernameäº†ã€‚</p>
<p>è‹¥è®¾ç½®æˆç±»ä¼¼äºysä¸»é¢˜çš„æ•ˆæœï¼Œå…¶å®Œæ•´çš„é…ç½®å†…å®¹å¦‚ä¸‹</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Use custom format</span>

<span class="o">[</span>username<span class="o">]</span>
<span class="nv">style_user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;white bold&quot;</span>
<span class="nv">style_root</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;black bold&quot;</span>
<span class="nv">format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;[</span><span class="nv">$user</span><span class="s2">](</span><span class="nv">$style</span><span class="s2">) &quot;</span>
<span class="nv">disabled</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span>
<span class="nv">show_always</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span>

<span class="o">[</span>directory<span class="o">]</span>
<span class="nv">truncation_length</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">8</span>
<span class="nv">truncation_symbol</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;â€¦/&quot;</span>

<span class="o">[</span>hostname<span class="o">]</span>
<span class="nv">ssh_only</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span>
<span class="nv">format</span><span class="w"> </span><span class="o">=</span><span class="w">  </span><span class="s2">&quot;on [</span><span class="nv">$hostname</span><span class="s2">](bold red) &quot;</span>
<span class="nv">trim_at</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;.companyname.com&quot;</span>
<span class="nv">disabled</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span>

<span class="o">[</span>status<span class="o">]</span>
<span class="nv">style</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;bg:blue&quot;</span>
<span class="nv">symbol</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;ğŸ”´&quot;</span>
<span class="nv">format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;[\[$symbol $common_meaning$signal_name$maybe_int\]]($style) &#39;</span>
<span class="nv">map_symbol</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span>
<span class="nv">disabled</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span>

<span class="o">[</span>time<span class="o">]</span>
<span class="nv">disabled</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span>
<span class="nv">format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;[\[ $time \]]($style) &#39;</span>
<span class="nv">time_format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;%T&quot;</span>
<span class="nv">utc_time_offset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;+8&quot;</span>
</code></pre></div>

<h2>å°ç»“</h2>
<p>åœ¨Startshipä¸­ï¼Œå¯ä»¥é€šè¿‡starship config å‘½ä»¤ç›´æ¥æ‰“å¼€tomlæ ¼å¼çš„é…ç½®æ–‡ä»¶ã€‚
å¦‚æœè¦è‡ªå®šä¹‰promptæ ¼å¼ï¼Œå¯ä»¥é€šè¿‡æ‰‹å†™formatå­—ä¸²çš„æ–¹å¼å®ç°çµæ´»çš„è‡ªå®šä¹‰è¿‡ç¨‹ï¼Œ
æ›´ç®€å•çš„æ˜¯ä½¿ç”¨å…¶é¢„è®¾çš„é…ç½®ï¼ŒåŸºæœ¬æ˜¯å¦‚ä¸‹çš„å®šä¹‰æ ¼å¼</p>
<div class="highlight"><pre><span></span><code><span class="o">[</span>é¢„è®¾é¡¹åç§°<span class="o">]</span>
<span class="nv">é…ç½®1</span><span class="o">=</span>å€¼1
<span class="nv">é…ç½®2</span><span class="o">=</span>å€¼2
</code></pre></div>

<p>è¯¦ç»†çš„é¢„è®¾å†…å®¹åœ¨Starshipçš„Configuration<sup id="fnref:3"><a class="footnote-ref" href="#fn:3">3</a></sup>å†…æœ‰æ–‡æ¡£è¯´æ˜ï¼Œ
é€šè¿‡è¯¥é…ç½®æ–‡æ¡£å¯ä»¥é¿å…æ‰‹å†™formatã€‚</p>
<div class="footnote">
<hr>
<ol>
<li id="fn:1">
<p>https://github.com/ohmyzsh/ohmyzsh/blob/master/themes/ys.zsh-theme&#160;<a class="footnote-backref" href="#fnref:1" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
<li id="fn:2">
<p>https://starship.rs/config/#prompt&#160;<a class="footnote-backref" href="#fnref:2" title="Jump back to footnote 2 in the text">&#8617;</a></p>
</li>
<li id="fn:3">
<p>https://starship.rs/config/#configuration&#160;<a class="footnote-backref" href="#fnref:3" title="Jump back to footnote 3 in the text">&#8617;</a></p>
</li>
</ol>
</div>
    </div><!-- /.entry-content -->


  </article>


</section>

<div id="comments">
  <h2 style="margin-top: 0.1rem;">Comments !</h2>
  <div id="gitalk-container"></div>
</div>
<script>
  var gitalk = new Gitalk({
    clientID: '4dfbf5aad180623dc634',
    clientSecret: '4c7167883746062103d9dbc2ec8b1ddfd6780d58',
    repo: 'steermomo.github.io',
    owner: 'steermomo',
    admin: ['steermomo'],
    id: location.pathname,      // Ensure uniqueness and length less than 50
    distractionFreeMode: false,  // Facebook-like distraction free mode
    createIssueManually: true,
  })
  gitalk.render('gitalk-container')
</script>
        <section id="extras" class="body">
        </section><!-- /#extras -->
<footer id="contentinfo" class="body">
  <address id="about" class="vcard body">
    Copyright Â© 2024
    </br>
    Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a
      href="http://python.org">Python</a>.
  </address>

  <!-- /#about -->


</footer><!-- /#contentinfo -->



</body>

</html>