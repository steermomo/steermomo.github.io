Title: Introduction to Git for Data Science 
Date: 2019-08-26 18:19
Modified: 2019-08-26 18:19
Category: Python, Git,
Tags: Git, 
Slug: git
Summary: 

<img src="{static}/images/sticker_hating.webp" style="max-width: 30%">

<br>
### check the state of a repository
```bash
git status
```

### How can I tell what I have changed?
![image.png](http://ww1.sinaimg.cn/large/dd456925ly1g6l70rjylhj20jx0a3dgl.jpg)

git status shows you which files are in this staging area, and which files have changes that haven't yet been put there.

### What is in a diff?
> diff --git a/report.txt b/report.txt  
> index e713b17..4c0742a 100644  
> --- a/report.txt  
> +++ b/report.txt  
> @@ -1,4 +1,5 @@  
> -# Seasonal Dental Surgeries 2017-18  
> +# Seasonal Dental Surgeries (2017) 2017-18  
> +# TODO: write new summary  

- A line starting with @@ that tells where the changes are being made. The pairs of numbers are start line and number of lines (in that section of the file where changes occurred). This diff output indicates changes starting at line 1, with 5 lines where there were once 4.


### How can I tell what's going to be committed?
`git diff -r HEAD`  
The -r flag means "compare to a particular revision", and HEAD is a shortcut meaning "the most recent commit".

`git diff -r HEAD path/to/file` 

<br>
### How do I commit changes?
> git commit -m "Program appears to have become self-aware."  
重新提交commit flag  
> git commit --amend - m "new message"

<br>
### How can I view a repository's history?
`git log`

### How can I view a specific file's history?
`git log path`

### How do I write a better log message
`git commit` without `-m "message"`

### How does Git store information?

blob: binary large object
![image.png](http://ww1.sinaimg.cn/mw690/dd456925ly1g6l7wm8fyhj207f046gll.jpg)


### What is a hash?
Every commit to a repository has a unique identifier called a hash (since it is generated by running the changes through a pseudo-random number generator called a hash function). This hash is normally written as a 40-character hexadecimal string like `7c35a3ce607a14953f070f0f83b5d74c2296ef93`, but most of the time, you only have to give Git the first 6 or 8 characters in order to identify the commit you mean.


<br>
### How can I view a specific commit?
`git show 0da2f7`

<br>
### What is Git's equivalent of a relative path?
`HEAD`, `HEAD~1`, `HEAD~2`. 分别表示最新的commit, 前一个, 再前一个

```bash
git show HEAD~1
```

<br>
### How can I see who changed what in a file?
`git annotate file`


<br>
### How can I see what changed between two commits?
`git diff ID1..ID2`, 两个点需要打, 不是省略号

```bash
git diff HEAD..HEAD~2
```

<br>

### How do I add new files?
`git add file`

<br>
### How do I tell Git to ignore certain files?
`.gitignore` file.

<br>
### How can I remove unwanted files?
`git clean -n`,  show you a list of files that are in the repository, but whose history Git is not currently tracking.

`git clean -f` will then delete those files.

<br>

### How can I see how Git is configured?
`git config --list` 

附加选项
- `--system`: for all users on the computer
- `--global`: per-user
- `--local`: per-projece

类似于变量名的局部屏蔽, 每一层都会覆盖上一层

<br>
### How can I change my Git configuration?
> git config --global setting value

`user.name`, `user.email`.

### How can I commit changes selectively?
If you make a mistake and accidentally stage a file you shouldn't have, you can unstage the additions with `git reset HEAD` and try again.

<br>

## Chapter 3, 'Undo'

### How do I re-stage files?
在`add`之后又再次编辑了文件
直接`git add`

### How can I undo changes to unstaged files?
> git checkout -- filename
unstaged file 意味着未被add

Use this command carefully: once you discard changes in this way, they are gone forever.

<br>

### How can I undo changes to staged files?
reset HEAD 用于撤销add的文件, 然后使用checkout拉出unstaged文件的上一个状态.
>git reset HEAD path/to/file
>git checkout -- path/to/file

<br>
### How do I restore an old version of a file?
将checkout命令中的 -- 替换为版本的hash
> git checkout 2242bd report.txt

只输出最近3次的log
> git log -3 file


<br>

### How can I undo all of the changes I have made?
`git reset HEAD`

`git checkout -- .`



<br> Chapter 4, 'Working with branches'.

### How can I see what branches my repository has?
`git branch`

### How can I view the differences between branches?
`git diff branch-1..branch-2`


### How can I switch from one branch to another?
`git checkout branch-name`


### How can I create a branch?
```bash
git checkout -b new-branch-name
```

### How can I merge two branches?
```bash
git merge source destination
# without ..
```


<br>
### How can I merge two branches with conflicts?
首先合并分支
```bash
git merge soure dest
```
然后使用`git status`查看冲突文件.

在文件中冲突的地方, git会添加类似如下的标记.
> <<<<<<< destination-branch-name  
> ...changes from the destination branch...  
> =======  
> ...changes from the source branch...  
> \>>>>>>> source-branch-name  

要处理冲突, 首先要移除标记, 然后编辑冲突内容(如只保留一个, 或其他处理方式), 最后add file, 提交commit.


## Chapter 5, 'Collaborating'.

### How can I create a brand new repository?
`git init project-name`


### How can I turn an existing project into a Git repository?
``git init path`


### How can I create a copy of an existing repository?
`git clone URL`

`git clone /path/to/project`

`git clone /project/name newprojectname`


### How can I find out where a cloned repository originated?
```bash
git remote
git remote -v
```

### How can I define remotes?
You can connect any two Git repositories this way
```bash
git remote add remote-name URL
git remote rm remote-name
```

### How can I pull in changes from a remote repository?

`git pull remote branch`

### What happens if I try to pull when I have unsaved changes?
commit or revert local changes

### How can I push my changes to a remote repository?
`git push remote-name branch-name`

### What happens if my push conflicts with someone else's work?
先pull到本地, 解决冲突, 再push.